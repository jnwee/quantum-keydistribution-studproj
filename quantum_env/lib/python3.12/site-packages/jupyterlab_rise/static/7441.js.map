{"version":3,"file":"7441.bundle.js","mappings":"qlBAOO,MAAMA,EAAiBC,eAAgBC,EAASC,EAAKC,GAExD,MAAMC,GADND,EAAaA,GAAc,EAAAE,gBACFC,KAAK,cACxBC,EAAQH,EAAMI,GAAG,2BACjBC,EAAaL,EAAMI,GAAG,iLAG5B,IAAKE,EAAQC,sBACT,OAEJ,GAAID,EAAQE,qBAGR,kBADMF,EAAQE,qBAGlB,MAAMC,GAAS,IAAAC,YAAW,CACtBP,MAAOA,EACPQ,KAAMN,EACNO,SAAU,CACNC,MAAOb,EAAMI,GAAG,mDAChBU,QAASd,EAAMI,GAAG,+GAEtBW,QAAS,CAAC,EAAAC,OAAOC,aAAa,CAAEJ,MAAOb,EAAMI,GAAG,cAE/Cc,MAAKC,IACFA,EAAOC,YACPd,EAAQC,uBAAwB,EAE9B,IAELc,OAAMC,IACPC,QAAQD,MAAM,+CAAgDA,EAAM,IAEnEE,SAAQ,KACTlB,EAAQE,0BAAuBiB,CAAS,IAE5CnB,EAAQE,qBAAuBC,CACnC,EAIA,IAAIH,GACJ,SAAWA,GAIPA,EAAQC,uBAAwB,CACnC,CALD,CAKGD,IAAYA,EAAU,CAAC,I,ICqHtB,EAaOoB,E,iEApKJ,MAAMC,UAAwB,EAAAC,YAIjC,WAAAC,CAAYC,GACRC,MAAMD,GACNE,KAAKC,eAAiB,IAAI,EAAAC,OAAOF,MAEjCF,EAAQK,MAAMC,SAAS,sBAEvBJ,KAAKK,YAAc,IAAI,EAAAC,eAAe,CAClCC,SAAUP,KAAKO,SACfC,SAAUV,EAAQW,oBAClBC,eAAe,EACfC,gBAAgB,IAGpB,MAAMC,EAAW,IAAIC,SAAQC,IACzBC,uBAAsB,KAClBD,GAAS,GACX,IAENd,KAAKgB,cACDlB,EAAQkB,eAAiB,IAAI,EAAAC,cAAc,CAAEV,SAAUP,KAAKO,WAChEP,KAAKkB,YAAcpB,EAAQoB,aAAe,IAAI,EAAAC,iBAC9CnB,KAAKY,SACDd,EAAQc,UACJZ,KAAKoB,QAAQlC,MAAK,IAAM0B,IAAUvB,OAAM,IAAMuB,IACtDZ,KAAKqB,eAAiBvB,EAAQuB,gBAAkB,IAAI,EAAAC,cACxD,CAIA,UAAIC,GACA,OAAOvB,KAAKwB,OAChB,CACA,UAAID,CAAOA,GACHvB,KAAKwB,UAAYD,IACjBvB,KAAKwB,QAAUD,EACfE,SAAS9C,KAAK+C,QAAgB,OAAIH,EAClCvB,KAAKC,eAAe0B,KAAKJ,GAEjC,CAIA,iBAAIK,GACA,OAAO5B,KAAKC,cAChB,CAWA,kBAAA4B,CAAmBC,GACf,KAAK9B,KAAK+B,mBACJ/B,KAAK+B,kBAAkBC,kBAAkBC,MAC3C,OAEJ,IAAIC,EAAOlC,KAAK+B,kBAAkBC,OAClC,EAAG,CACC,GAAIE,aAAgBC,aAAeL,EAAGI,GAClC,OAAOA,EAEXA,EAAOA,EAAKE,UAChB,OAASF,GAAQA,EAAKE,YAAcF,IAASA,EAAKE,WActD,CAIA,cAAAC,CAAeC,GAEX,GADAtC,KAAK+B,kBAAoBO,GACrBA,EAAMC,WACN,EAAQC,oBAAoBF,EAAMN,SAGvBhC,KAAKK,YAAYoC,KAAKH,GACzB,CACR,MAAMI,EAAQ1C,KAAKK,YAAYsC,KAAKD,MAIpC,GAAqB,IAAjBA,EAAME,QACNF,EAAM,GAAGG,UAAYnD,EAA2BW,YAEhD,YADAL,KAAKK,YAAYsC,KAAKG,QAI1BR,EAAMS,iBACNT,EAAMU,iBACV,CACJ,GAKJ,SAAWrD,GAiBPA,EAAgBsD,UAVhB,SAAmBC,EAAMC,GACrB,MAAMC,EAAa,IAAIC,OAAO,IAAIF,EAAMG,KAAKC,OAE7C,QADcL,EAAKM,MAAMJ,EAO7B,EAKAzD,EAAgB8D,OAAS,IAAI,EAAAC,MAAM,iCAAkC,wLAWrE/D,EAAgBgE,cAAgB,IAAI,EAAAD,MAAM,wCAAyC,sCACtF,CAjCD,CAiCG/D,IAAoBA,EAAkB,CAAC,IAK1C,SAAWrB,GAOPA,EAAQkE,oBAHR,SAA6BoB,GACzB,OAA8D,OAAvDA,EAAQC,QAAQ,kCAC3B,CAEH,CARD,CAQG,IAAY,EAAU,CAAC,IAK1B,SAAWnE,GAIPA,EAA2BW,YAAc,8BAC5C,CALD,CAKGX,IAA+BA,EAA6B,CAAC,I,sEChLhE,MAIMoE,EAAgB,aAIhBC,EAAgB,iBAIhBC,EAAe,gBAIfC,EAAe,IACfC,EAAiB,cAIVC,EAAY,IAAI,EAAAT,MAAM,oCAAqC,4UAIjE,MAAMU,UAAiB,EAAAC,OAI1B,WAAAxE,CAAYC,GACRC,QAIAC,KAAKsE,eAAiB,CAACC,EAASC,KAC5B,OAAQA,EAAIC,MACR,IAAK,cACDD,EAAIE,MAAMtE,SAAS8D,GACnBlE,KAAK2E,SAASC,IAAIJ,EAAIE,OACtB,MACJ,IAAK,gBACDF,EAAIE,MAAMG,YAAYX,GACtBlE,KAAK2E,SAASG,OAAON,EAAIE,OAKjC,OAAO,CAAI,EAEf1E,KAAK+E,eAAiB,IAAI,EAAA7E,OAAOF,MACjCA,KAAKgF,cAAgB,KACrBhF,KAAKiF,gBAAkB,IAAI,EAAA/E,OAAOF,MAClCA,KAAKkF,aAAe,GACpBlF,KAAKmF,oBAAsB,IAAI,EAAAjF,OAAOF,MACtCA,KAAKoF,aAAe,IAAI,EAAAlF,OAAOF,MAC/BA,KAAKqF,aAAc,EACnBrF,KAAKsF,gBAAkB,IAAI,EAAApF,OAAOF,MAClCA,KAAKuF,iBAAmB,IAAI,EAAAC,WAAU,KAClCxF,KAAKsF,gBAAgB3D,UAAKlC,EAAU,GACrC,GACHO,KAAKyF,UAAY,IAAI,EAAAC,gBACrB1F,KAAK2E,SAAW,IAAI,EAAAgB,aACpB3F,KAAK4F,yBAA0B,EAC/B5F,KAAK6F,WAAa,IAAIC,IACtB9F,KAAK+F,kBAAoB,IAAID,IAC7B9F,KAAKgG,kBAAoB,IAAIF,IAC7B9F,KAAKiG,eAAiB,IAAIC,MAC1BlG,KAAKI,SAnEmB,eAoExBJ,KAAKmG,GAAK,QACyE,KAA9ErG,aAAyC,EAASA,EAAQsG,kBAC3DpG,KAAKqG,YAAc,CAAE,oBAAqB,CAAC,EAAG,kBAAmB,CAAC,IAGtE,MAAMC,EAAkBtG,KAAKuG,gBAAkB,IAAI,EAAQC,eAAexG,MAC1EA,KAAKuG,gBAAgBE,OAErB,MAAMC,EAAkB,IAAI,EAAAC,MAC5BD,EAAgBtG,SAAS,uBACzBsG,EAAgBE,UAAUN,GAC1B,MAAMO,EAAe7G,KAAK8G,aAAe,IAAI,EAAAC,SACvCC,EAAehH,KAAKiH,aAAe,IAAI,EAAQC,aACrDF,EAAYG,MAAMjF,KAAKkF,aAAa,OAAQ,cAC5C,MAAMC,EAAcrH,KAAKsH,YAAc,IAAI,EAAQJ,aACnDG,EAAWF,MAAMjF,KAAKkF,aAAa,OAAQ,UAC3C,MAAMG,EAAevH,KAAKwH,aAAe,IAAI,EAAAT,SAC7CQ,EAAYrF,KAAKkF,aAAa,OAAQ,eACtC,MAAMK,EAAY,IAAI,EAAAV,SAChBW,EAAe1H,KAAK2H,aACtB,IAAI,EAAQC,qBACVC,EAAa7H,KAAK8H,WAAa,IAAI,EAAAC,aAAa,CAClDC,WAAY,EAAA3D,OAAO4D,WAAWC,UAElC,EAAAC,YAAYC,mBAAmBP,EAAW7H,KAAKsE,gBAC/C,MAAM+D,EAAerI,KAAKsI,aACtB,IAAI,EAAQV,qBACVW,EAAavI,KAAKwI,WAAa,IAAI,EAAAC,YAAY,CACjDC,aAAa,IAEXC,EAAe3I,KAAK4I,aAAe,IAAI,EAAQC,eAC/CC,EAAgB9I,KAAK+I,cAAgB,IAAI,EAAQF,eACjDG,EAAa,IAAI,EAAAC,UACvBpC,EAAYV,GAAK,kBACjBa,EAAYG,MAAMhB,GAAK,gBACvBkB,EAAWF,MAAMhB,GAAK,eACtBoB,EAAYpB,GAAK,kBACjBsB,EAAUtB,GAAK,wBACfuB,EAAYvB,GAAK,uBACjB0B,EAAU1B,GAAK,qBACfkC,EAAYlC,GAAK,sBACjBoC,EAAUpC,GAAK,gBACfwC,EAAYO,QAAQ9I,SAAS0D,GAC7B6E,EAAYO,QAAQ9I,SAAS,eAC7BuI,EAAYO,QAAQhH,KAAKkF,aAAa,OAAQ,iBAC9CuB,EAAYQ,aAAahD,GAAK,gBAC9B2C,EAAaI,QAAQ9I,SAAS0D,GAC9BgF,EAAaI,QAAQ9I,SAAS,gBAC9B0I,EAAaI,QAAQhH,KAAKkF,aAAa,OAAQ,iBAC/C0B,EAAaK,aAAahD,GAAK,iBAC/B0B,EAAU3F,KAAKkF,aAAa,OAAQ,QACpCK,EAAU2B,QAAU,EACpB1B,EAAY0B,QAAU,EACtBvB,EAAUuB,QAAU,EACpBf,EAAYe,QAAU,EACtBvC,EAAYwC,UAAY,gBACxB3B,EAAY4B,YAAc,WAC1B7B,EAAU4B,UAAY,gBACtBhB,EAAYiB,YAAc,aAC1B/B,EAAY8B,UAAY,gBACxB,EAAAE,WAAWC,WAAWb,EAAYQ,aAAc,GAChD,EAAAI,WAAWC,WAAWjB,EAAW,GACjC,EAAAgB,WAAWC,WAAW3B,EAAW,GACjC,EAAA0B,WAAWC,WAAWV,EAAaK,aAAc,GACjD,EAAApC,SAASyC,WAAWb,EAAYO,QAAS,GACzC,EAAAnC,SAASyC,WAAWnB,EAAa,GACjC,EAAAtB,SAASyC,WAAWV,EAAaI,QAAS,GAC1C,EAAAK,WAAWC,WAAW9B,EAAa,GACnCW,EAAYzB,UAAU+B,EAAYQ,cAClCd,EAAYzB,UAAUiB,GACtBQ,EAAYzB,UAAUkC,EAAaK,cACnCzB,EAAYd,UAAUyB,GACtBX,EAAYd,UAAU2B,GACtBd,EAAUb,UAAU+B,EAAYO,SAChCzB,EAAUb,UAAUc,GACpBD,EAAUb,UAAUkC,EAAaI,SACjCF,EAAWK,UAAY,gBACvBL,EAAWI,QAAU,EAIrB1B,EAAY+B,iBAAiB,CAAC,EAAG,IACjCpB,EAAYoB,iBAAiB,CAAC,EAAG,IAAK,IACtC,EAAAR,UAAUO,WAAW3C,EAAa,GAClC,EAAAoC,UAAUO,WAAWxC,EAAYG,MAAO,GACxC,EAAA8B,UAAUO,WAAWnC,EAAWF,MAAO,GACvC,EAAA8B,UAAUO,WAAW/B,EAAW,GAChC,EAAAwB,UAAUO,WAAWjC,EAAa,GAClCyB,EAAWpC,UAAUF,GACrBsC,EAAWpC,UAAUC,GACrBmC,EAAWpC,UAAUS,EAAWF,OAChC6B,EAAWpC,UAAUa,GACrBuB,EAAWpC,UAAUW,GAErBvH,KAAK8G,aAAa4C,OAClB1J,KAAKwH,aAAakC,OAClB1J,KAAKwI,WAAWkB,OAChB1J,KAAK2J,OAASX,EAEdhJ,KAAK2E,SAASiF,eAAeC,QAAQ7J,KAAK8J,kBAAmB9J,MAC7DA,KAAK2E,SAASoF,cAAcF,QAAQ7J,KAAKgK,iBAAkBhK,MAE3DA,KAAK8H,WAAWmC,eAAeJ,QAAQ7J,KAAKkK,kBAAmBlK,MAE/DA,KAAK2H,aAAawC,QAAQN,QAAQ7J,KAAKkK,kBAAmBlK,MAE1DA,KAAKwI,WAAWoB,eAAeC,QAAQ7J,KAAKkK,kBAAmBlK,MAC/DA,KAAKwI,WAAW4B,OAAOC,SAASR,QAAQ7J,KAAKsK,mBAAoBtK,MACjEA,KAAKwI,WAAWW,aAAaoB,cAAcV,QAAQ7J,KAAKsK,mBAAoBtK,MAE5EA,KAAK4I,aAAauB,QAAQN,QAAQ7J,KAAKkK,kBAAmBlK,MAC1DA,KAAK+I,cAAcoB,QAAQN,QAAQ7J,KAAKkK,kBAAmBlK,MAE3DA,KAAKsI,aAAa6B,QAAQN,QAAQ7J,KAAKkK,kBAAmBlK,MAE1D,MAAMwK,EAAgBxK,KAAKyK,cAAgB,IAAI,EAAQC,aAAa1K,MACpEA,KAAK4E,IAAI4F,EAAc,MAAO,CAAEG,KAAM,MACT,sBAAzB3K,KAAK8H,WAAW8C,MAChB5K,KAAKsH,YAAYV,UAAU5G,KAAKiH,aAAaE,MAAO,KACpDqD,EAAad,QAGbV,EAAW6B,aAAa,EAAG7K,KAAKiH,aAAaE,OAEjDnH,KAAKjC,WAAa,EAAAE,eAGlB+B,KAAK4J,eAAeC,SAAQ,CAACiB,EAAQC,KACjC,IAAIC,EAAWD,EAAKC,SAChBC,EAAWF,EAAKE,SAEhBA,IACAA,EAAS9M,MAAM+M,QAAQC,WAAWnL,KAAKoL,uBAAwBpL,MAC3DiL,aAAoB,EAAAI,gBACpBJ,EAASK,QAAQC,YAAYJ,WAAWnL,KAAKwL,mBAAoBxL,OAIrEgL,IACAA,EAAS7M,MAAM+M,QAAQrB,QAAQ7J,KAAKoL,uBAAwBpL,MAC5DA,KAAKoL,yBACDJ,aAAoB,EAAAK,gBACpBL,EAASM,QAAQC,YAAY1B,QAAQ7J,KAAKwL,mBAAoBxL,OAGtEA,KAAKwL,oBAAoB,GAEjC,CAIA,iBAAIzB,GACA,OAAO/J,KAAK+E,cAChB,CAIA,gBAAI0G,GACA,OAAOzL,KAAK2E,SAAS8G,YACzB,CAIA,oBAAIC,GACA,OAAO1L,KAAK8H,WAAW4D,gBAC3B,CACA,oBAAIA,CAAiBC,GACjB3L,KAAK8H,WAAW4D,iBAAmBC,CACvC,CAIA,gBAAIC,GACA,OAAO5L,KAAK8H,WAAW8D,YAC3B,CAIA,kBAAIhC,GACA,OAAO5J,KAAKiF,eAChB,CAKA,eAAI4G,GACA,OAAO7L,KAAKkF,YAChB,CAMA,sBAAI4G,GACA,OAAO9L,KAAKmF,mBAChB,CAIA,iBAAI4G,GACA,OAAO/L,KAAK2E,SAASoH,aACzB,CAIA,kBAAI9B,GACA,OAAOjK,KAAKsF,eAChB,CAIA,iBAAI0G,GACA,OAAQhM,KAAK4I,aAAaM,QAAQ+C,YACtC,CAIA,kBAAIC,GACA,OAAQlM,KAAK+I,cAAcG,QAAQ+C,YACvC,CAKA,oBAAIE,GACA,OAAOnM,KAAKoM,SAAS,0BACzB,CACA,oBAAID,CAAiBR,GACjB3L,KAAKqM,YAAY,0BAA2BV,EAChD,CAIA,QAAIf,GACA,OAAO5K,KAAK8H,WAAW8C,IAC3B,CACA,QAAIA,CAAKA,GACL,MAAM0B,EAAOtM,KAAK8H,WAClB,GAAI8C,IAAS0B,EAAK1B,KACd,OAEJ,MAAM2B,EAA2BvM,KAAK+L,cACtC,GAAa,oBAATnB,EAEA5K,KAAKgF,cAAgBsH,EAAKE,aAC1BF,EAAK1B,KAAOA,EAGR5K,KAAK+L,eACLO,EAAKG,eAAezM,KAAK+L,eAG7B/L,KAAK2J,OAAOkB,aAAa,EAAG7K,KAAKiH,aAAaE,OAC9CnH,KAAKyK,cAAchE,OACnBzG,KAAKoL,yBACDpL,KAAK4F,yBACL5F,KAAKsH,YAAYH,MAAMuC,WAG1B,CAGD,MAAMgD,EAAUxG,MAAMyG,KAAKL,EAAKI,WAChCJ,EAAK1B,KAAOA,EAER5K,KAAKgF,gBAEL,EAAQ4H,oBAAoBN,EAAMtM,KAAKgF,cAAc6H,MACrDP,EAAKQ,cAAc9M,KAAKgF,eACxBhF,KAAKgF,cAAgB,MAGrBhF,KAAK+M,gBAAgBC,YACrBhN,KAAK+M,gBACAE,kBACA/N,MAAKgO,IACN,GAAIA,EAAU,CACV,MAAM,cAAEnB,EAAa,KAAEO,GAASY,EAC5BZ,GACAtM,KAAK8H,WAAWgF,cAAcR,GAE9BP,GACA/L,KAAKmN,aAAapB,EAAc5F,GAExC,KAEC9G,OAAM+N,IACP7N,QAAQD,MAAM,0CACdC,QAAQD,MAAM8N,EAAO,IAQ7BV,EAAQW,SAAQC,IACPA,EAAOC,QACRvN,KAAKwN,eAAeF,EAAQ,IACrBtN,KAAK+F,kBAAkB0H,IAAIH,GAC9BI,UAAU,GAElB,IAEJ1N,KAAK+F,kBAAkB4H,QAGnBpB,GACAD,EAAKG,eAAeF,GAGxBvM,KAAK4E,IAAI5E,KAAKiH,aAAaE,MAAO,MAAO,CAAEwD,KAAM,MACjD3K,KAAKyK,cAAcf,MACvB,CAEA1J,KAAKkC,KAAKR,QAAQkM,UAAYhD,EAC9B5K,KAAKwI,WAAWqF,MAEhB7N,KAAKoF,aAAazD,KAAKiJ,EAC3B,CAIA,eAAIkD,GACA,OAAO9N,KAAKoF,YAChB,CAKA,YAAIxE,GACA,OAAOZ,KAAKyF,UAAUsI,OAC1B,CACA,cAAIhQ,GACA,IAAIiQ,EACJ,OAAmC,QAA3BA,EAAKhO,KAAKiO,mBAAgC,IAAPD,EAAgBA,EAAK,EAAA/P,cACpE,CACA,cAAIF,CAAW4N,GACX,GAAIA,IAAU3L,KAAKiO,YAAa,CAC5BjO,KAAKiO,YAActC,EAEnB,EAAAuC,UAAUnQ,WAAa4N,EACvB,MAAM3N,EAAQ2N,EAAMzN,KAAK,cACzB8B,KAAKiH,aAAaE,MAAMjF,KAAKkF,aAAa,aAAcpJ,EAAMI,GAAG,cACjE4B,KAAK4I,aAAaM,QAAQhH,KAAKkF,aAAa,aAAcpJ,EAAMI,GAAG,iBACnE4B,KAAK4I,aAAaM,QAAQiF,YAAY/G,aAAa,aAAcpJ,EAAMI,GAAG,iBAC1E4B,KAAK+I,cAAcG,QAAQhH,KAAKkF,aAAa,aAAcpJ,EAAMI,GAAG,sBACpE4B,KAAK+I,cAAcG,QAAQiF,YAAY/G,aAAa,aAAcpJ,EAAMI,GAAG,qBAC/E,CACJ,CAIA,cAAIgQ,GACA,OAAO,EAAAC,QAAQC,SAAStO,KAAKqG,YACjC,CAIA,YAAA8G,CAAahH,GACT,GAAInG,KAAK4I,aAAa2F,IAAIpI,GAEtB,YADAnG,KAAK4I,aAAa8E,SAASvH,GAG/B,GAAInG,KAAK+I,cAAcwF,IAAIpI,GAEvB,YADAnG,KAAK+I,cAAc2E,SAASvH,GAGhC,MAAMqI,EAAWxO,KAAKwI,WAAW4B,OAAOqE,OAAOC,WAAUvQ,GAASA,EAAMwQ,MAAMxI,KAAOA,IACrF,GAAIqI,GAAY,EAEZ,YADAxO,KAAKwI,WAAWoG,aAAeJ,GAGnC,MAAMlC,EAAOtM,KAAK8H,WACZwF,GAAS,IAAAuB,MAAKvC,EAAKI,WAAWf,GAASA,EAAMxF,KAAOA,IACtDmH,GACAhB,EAAKG,eAAea,EAE5B,CAUA,YAAAwB,CAAaC,EAAO,QAChB,OAAQA,GACJ,IAAK,OACD,CACI,MAAMC,EAAUhP,KAAKiP,iBACrB,IAAKD,EACD,OAEAA,EAAQ/C,cACR+C,EAAQ/C,aAAa0C,MAAMjB,UAEnC,CACA,OACJ,IAAK,OACL,IAAK,QACL,IAAK,SACL,IAAK,MACL,IAAK,OACL,IAAK,SACDnO,QAAQ2P,MAAM,SAASH,oCACvB,MACJ,QACI,MAAM,IAAII,MAAM,iBAAiBJ,KAE7C,CAIA,eAAAK,GACI,MAAMJ,EAAUhP,KAAKiP,iBACrB,IAAKD,EACD,OAEJ,MAAMK,EAAKL,EAAQJ,aACnB,IAAY,IAARS,EAAJ,CAGA,GAAIA,EAAKL,EAAQP,OAAO7L,OAAS,EAK7B,OAJAoM,EAAQJ,cAAgB,OACpBI,EAAQ/C,cACR+C,EAAQ/C,aAAa0C,MAAMjB,YAInC,GAAI2B,IAAOL,EAAQP,OAAO7L,OAAS,EAAG,CAClC,MAAM0M,EAAUtP,KAAKuP,aAAa,QAC9BD,IACAA,EAAQV,aAAe,EACnBU,EAAQrD,cACRqD,EAAQrD,aAAa0C,MAAMjB,WAGvC,CAhBA,CAiBJ,CAIA,mBAAA8B,GACI,MAAMR,EAAUhP,KAAKiP,iBACrB,IAAKD,EACD,OAEJ,MAAMK,EAAKL,EAAQJ,aACnB,IAAY,IAARS,EAAJ,CAGA,GAAIA,EAAK,EAKL,OAJAL,EAAQJ,cAAgB,OACpBI,EAAQ/C,cACR+C,EAAQ/C,aAAa0C,MAAMjB,YAInC,GAAW,IAAP2B,EAAU,CACV,MAAMI,EAAUzP,KAAKuP,aAAa,YAClC,GAAIE,EAAS,CACT,MAAMC,EAAMD,EAAQhB,OAAO7L,OAC3B6M,EAAQb,aAAec,EAAM,EACzBD,EAAQxD,cACRwD,EAAQxD,aAAa0C,MAAMjB,UAEnC,CACJ,CAjBA,CAkBJ,CAIA,kBAAAiC,GACI,MAAML,EAAUtP,KAAKuP,aAAa,QAC9BD,GACIA,EAAQrD,cACRqD,EAAQrD,aAAa0C,MAAMjB,UAGvC,CAIA,sBAAAkC,GACI,MAAMN,EAAUtP,KAAKuP,aAAa,YAC9BD,GACIA,EAAQrD,cACRqD,EAAQrD,aAAa0C,MAAMjB,UAGvC,CAQA,GAAA9I,CAAI0I,EAAQyB,EAAO,OAAQjP,GACvB,IAAIkO,EACJ,IAAKhO,KAAKqG,YAEN,YADArG,KAAKiG,eAAe4J,KAAK,CAAEvC,SAAQyB,OAAMjP,YAG7C,IAAIgQ,EAsBJ,QArBKhQ,aAAyC,EAASA,EAAQ2E,OAASzE,KAAKqG,YAAYrG,KAAK4K,MAAM9K,EAAQ2E,OACxGqL,EAAe9P,KAAKqG,YAAYrG,KAAK4K,MAAM9K,EAAQ2E,MACnDzE,KAAK6F,WAAWkK,IAAIzC,EAAOnH,GAAIrG,EAAQ2E,OAGvCqL,EAAe9P,KAAKqG,YAAYrG,KAAK4K,MAAM0C,EAAOnH,KAElDrG,aAAyC,EAASA,EAAQ2E,QAC1DzE,KAAK6F,WAAWkK,IAAIzC,EAAOnH,GAAIrG,EAAQ2E,MACvC6I,EAAO0C,SAASnG,SAAQ,KACpB7J,KAAK6F,WAAWoK,OAAO3C,EAAOnH,GAAG,KAGzC4I,EAAgG,QAAxFf,EAAK8B,aAAmD,EAASA,EAAaf,YAAyB,IAAPf,EAAgBA,EAAKe,EAC7HjP,EACIA,IAAYgQ,aAAmD,EAASA,EAAahQ,SAC/E,IACKA,KACAgQ,aAAmD,EAASA,EAAahQ,cAE9EL,EACFsP,GAAQ,QACZ,IAAK,SACD,OAAO/O,KAAKkQ,iBAAiB5C,EAAQxN,GACzC,IAAK,OACD,OAAOE,KAAKmQ,eAAe7C,EAAQxN,GACvC,IAAK,SACD,OAAOE,KAAKoQ,iBAAiB9C,EAAQxN,GACzC,IAAK,OACD,OAAOE,KAAKqQ,eAAe/C,EAAQxN,GACvC,IAAK,OACD,OAAOE,KAAKwN,eAAeF,EAAQxN,GACvC,IAAK,OACD,OAAOE,KAAKsQ,eAAehD,EAAQxN,GACvC,IAAK,QACD,OAAOE,KAAKuQ,gBAAgBjD,EAAQxN,GACxC,IAAK,MACD,OAAOE,KAAKwQ,cAAclD,EAAQxN,GACtC,QACI,MAAM,IAAIqP,MAAM,iBAAiBJ,KAE7C,CAeA,IAAA0B,CAAKnD,EAAQyB,EAAMnE,GACf,IAAIoD,EACJ,MAAMvJ,EAAiD,QAAzCuJ,EAAKhO,KAAK6F,WAAW4H,IAAIH,EAAOnH,WAAwB,IAAP6H,EAAgBA,EAAKV,EAAOnH,GAC3F,IAAK,MAAMuK,IAAK,CAAC,kBAAmB,qBAAqBC,QAAOC,IAAMhG,GAAQgG,IAAMhG,IAChF5K,KAAKqG,YAAYqK,GAAGjM,GAAQ,IACrBzE,KAAKqG,YAAYqK,GAAGjM,GACvBsK,QAIR,OADA/O,KAAK4E,IAAI0I,EAAQyB,GACV/O,KAAKqG,WAChB,CAIA,YAAAwK,GACI7Q,KAAK4I,aAAakI,WAClB9Q,KAAKkK,mBACT,CAIA,aAAA6G,GACI/Q,KAAK+I,cAAc+H,WACnB9Q,KAAKkK,mBACT,CAIA,OAAA8G,GACQhR,KAAKiR,aAGTjR,KAAKuF,iBAAiByL,UACtBjR,MAAMiR,UACV,CAQA,UAAAE,GACIlR,KAAK4I,aAAauI,SAClBnR,KAAKkK,mBACT,CAQA,WAAAkH,GACIpR,KAAK+I,cAAcoI,SACnBnR,KAAKkK,mBACT,CAIA,QAAAmH,GAIInL,MAAMyG,KAAK3M,KAAK8H,WAAW4E,WAAWW,SAAQC,GAAUA,EAAOxK,UAC/D9C,KAAKwI,WAAWW,aAAauD,QAAQW,SAAQC,GAAUA,EAAOxK,SAClE,CAOA,mBAAAwO,CAAoBC,GAChB,OAAQA,GACJ,IAAK,OACD,OAAOvR,KAAK4I,aAAa4I,UAC7B,IAAK,QACD,OAAOxR,KAAK+I,cAAcyI,UAEtC,CAMA,wBAAAC,GACI,OAAQzR,KAAK4F,uBACjB,CAIA,OAAA8L,CAAQ3C,GACJ,OAAQA,GACJ,IAAK,SACD,OAA4C,IAArC/O,KAAKwH,aAAakF,QAAQ9J,OACrC,IAAK,OACD,OAAuD,IAAhD5C,KAAKwI,WAAWW,aAAauD,QAAQ9J,OAChD,IAAK,SACD,OAA4C,IAArC5C,KAAK8G,aAAa4F,QAAQ9J,OACrC,IAAK,OACD,OAAyD,IAAlD5C,KAAK4I,aAAaO,aAAauD,QAAQ9J,OAClD,IAAK,OACD,OAAO5C,KAAK8H,WAAW4J,QAC3B,IAAK,OACD,OAAkD,IAA3C1R,KAAKiH,aAAaE,MAAMuF,QAAQ9J,OAC3C,IAAK,QACD,OAA0D,IAAnD5C,KAAK+I,cAAcI,aAAauD,QAAQ9J,OACnD,IAAK,MACD,OAAiD,IAA1C5C,KAAKsH,YAAYH,MAAMuF,QAAQ9J,OAC1C,QACI,OAAO,EAEnB,CAOA,mBAAMkK,CAAclC,EAAM+G,EAAgBC,EAAgB,CAAC,GACvD,IAAI5D,EAAI6D,EAAIC,EAAIC,EAEhB/R,KAAKqG,YAAc,CACf,kBAA+D,QAA3C2H,EAAK4D,EAAc,0BAAuC,IAAP5D,EAAgBA,EAAK,CAAC,EAC7F,oBAAmE,QAA7C6D,EAAKD,EAAc,4BAAyC,IAAPC,EAAgBA,EAAK,CAAC,GAErG7R,KAAKiG,eAAeoH,SAAQ,EAAGC,SAAQyB,OAAMjP,cACzCE,KAAK4E,IAAI0I,EAAQyB,EAAMjP,EAAQ,IAEnCE,KAAKiG,eAAerD,OAAS,EAC7B5C,KAAK+M,gBAAkB4E,EAEvB,MAAMhI,QAAegI,EAAeK,SAE9B,SAAE9E,EAAQ,SAAE+E,EAAQ,SAAEC,EAAQ,UAAEC,EAAS,QAAEC,EAAO,cAAEC,GAAkB1I,EAE5E,GAAIuD,EAAU,CACV,MAAM,cAAEnB,EAAa,KAAEO,GAASY,EAC5BZ,GAAiB,sBAAT1B,GACR5K,KAAK8H,WAAWgF,cAAcR,GAE9B1B,IACA5K,KAAK4K,KAAOA,GAEZmB,GACA/L,KAAKmN,aAAapB,EAAc5F,GAExC,MAGQyE,IACA5K,KAAK4K,KAAOA,GAUpB,QAPqFnL,KAAhF2S,aAAyC,EAASA,EAAQE,oBAC3DtS,KAAK4F,yBAA2BwM,EAAQE,iBACtB,oBAAdtS,KAAK4K,MACL5K,KAAKsH,YAAYH,MAAMoL,UAAUvS,KAAK4F,0BAI1CqM,EAAU,CACV,MAAM,cAAElG,EAAa,QAAEW,EAAO,KAAE8F,GAASP,EACnCQ,EAA0G,QAA7FX,EAAKpF,aAAyC,EAASA,EAAQgG,KAAIpF,GAAUA,EAAOnH,YAAwB,IAAP2L,EAAgBA,EAAK,GAE7I9R,KAAKwI,WAAW4B,OAAOqE,OAClBkC,QAAOxS,IAAUsU,EAAUE,SAASxU,EAAMwQ,MAAMxI,MAChDuM,KAAIvU,GAASA,EAAMwQ,MAAM7L,UAE9B,MAAM8P,EAAW5S,KAAKwI,WAAW4B,OAAOqE,OAAOiE,KAAIvU,GAASA,EAAMwQ,MAAMxI,KAGxE,IAFAuG,SAAkDA,EAAQiE,QAAOrD,IAAWsF,EAASD,SAASrF,EAAOnH,MAAKuM,KAAIpF,GAAUtN,KAAKwI,WAAW5B,UAAU0G,MAE1I,EAAAuF,SAASC,aAAaL,EAAWzS,KAAKwI,WAAW4B,OAAOqE,OAAOiE,KAAIvU,GAASA,EAAMwQ,MAAMxI,OAC5FnG,KAAKwI,WAAW4B,OAAOqE,OAAOpB,SAAQ,CAAClP,EAAO4U,KAC1C,MAAMC,EAAWP,EAAU/D,WAAUvI,GAAMhI,EAAMwQ,MAAMxI,IAAMA,IACzD6M,GAAY,GAAKA,GAAYD,GAC7B/S,KAAKwI,WAAW4B,OAAO6I,UAAUD,EAAU7U,EAC/C,IAGR,GAAI4N,EAAe,CACf,MAAMgH,EAAQ/S,KAAKwI,WAAWW,aAAauD,QAAQgC,WAAUpB,GAAUA,EAAOnH,KAAO4F,EAAc5F,KAC/F4M,IACA/S,KAAKwI,WAAWoG,aAAemE,EACU,QAAxChB,EAAK/R,KAAKwI,WAAWuD,qBAAkC,IAAPgG,GAAyBA,EAAGrE,WAErF,CACI8E,GAAQA,EAAO,EACfxS,KAAK2H,aAAa8B,iBAAiB,CAAC,EAAM+I,EAAMA,KAIhDxS,KAAKwI,WAAWW,aAAauD,QAAQW,SAAQC,GAAUA,EAAOxK,UAC9D9C,KAAKwI,WAAWkB,OAExB,CAEIwI,EACAlS,KAAK4I,aAAasK,UAAUhB,GAGf,oBAATtH,GACA5K,KAAK6Q,eAITsB,EACAnS,KAAK+I,cAAcmK,UAAUf,GAGhB,oBAATvH,GACA5K,KAAK+Q,gBAITsB,GACArS,KAAKsI,aAAamB,iBAAiB4I,GAElCrS,KAAKqF,cAIN,EAAA8C,YAAYgL,QACZnT,KAAKyF,UAAU3E,QAAQ6I,GAE/B,CAIA,UAAA6C,GAoBI,MAjBe,CACXU,SAAU,CACNnB,cAAe/L,KAAK2E,SAASoH,cAC7BO,KAAoB,oBAAdtM,KAAK4K,MACL5K,KAAKgF,eACLhF,KAAK8H,WAAW0E,cAE1ByF,SAAU,CACNlG,cAAe/L,KAAKwI,WAAWuD,cAC/BW,QAASxG,MAAMyG,KAAK3M,KAAKwI,WAAWW,aAAauD,SACjD8F,KAAMxS,KAAK2H,aAAa0K,gBAAgB,IAE5CH,SAAUlS,KAAK4I,aAAawK,YAC5BjB,UAAWnS,KAAK+I,cAAcqK,YAC9BhB,QAAS,CAAEE,kBAAmBtS,KAAK4F,yBACnCyM,cAAerS,KAAKsI,aAAa+J,gBAGzC,CAMA,+BAAAgB,GACsB,oBAAdrT,KAAK4K,OACD5K,KAAKsH,YAAYH,MAAMqK,WACvBxR,KAAK4F,yBAA0B,EAC/B5F,KAAKsH,YAAYH,MAAMuC,SAGvB1J,KAAK4F,yBAA0B,EAC/B5F,KAAKsH,YAAYH,MAAMV,OACvBzG,KAAKoL,0BAETpL,KAAKkK,oBAEb,CAMA,0BAAAoJ,CAA2B/B,GACV,UAATA,EACIvR,KAAK+I,cAAcyI,UACnBxR,KAAK+I,cAAcW,OAGnB1J,KAAK+I,cAActC,OAInBzG,KAAK4I,aAAa4I,UAClBxR,KAAK4I,aAAac,OAGlB1J,KAAK4I,aAAanC,MAG9B,CAMA,YAAA8M,CAAaC,GACT,GAAIA,EAAOxL,WACP,OAAQwL,EAAOxL,YACX,IAAK,UACDhI,KAAK8H,WAAWE,WAAa,EAAA3D,OAAO4D,WAAWC,QAC/C,MACJ,IAAK,QACDlI,KAAK8H,WAAWE,WAAa,EAAA3D,OAAO4D,WAAWwL,MAC/C,MACJ,IAAK,oBACDzT,KAAK8H,WAAWE,WAAa,EAAA3D,OAAO4D,WAAWyL,kBAI/D,CAIA,OAAAhH,CAAQqC,GACJ,OAAQA,QAAmCA,EAAO,QAC9C,IAAK,OACD,OAAO/O,KAAK8H,WAAW4E,UAC3B,IAAK,OACD,OAAO,IAAAgG,KAAI1S,KAAK4I,aAAaM,QAAQuF,QAAQkF,GAAKA,EAAEhF,QACxD,IAAK,QACD,OAAO,IAAA+D,KAAI1S,KAAK+I,cAAcG,QAAQuF,QAAQkF,GAAKA,EAAEhF,QACzD,IAAK,SACD,OAAO3O,KAAK8G,aAAa8M,WAC7B,IAAK,MACD,OAAO5T,KAAKsH,YAAYH,MAAMyM,WAClC,IAAK,OACD,OAAO5T,KAAKiH,aAAaE,MAAMyM,WACnC,IAAK,SACD,OAAO5T,KAAKwH,aAAaoM,WAC7B,QACI,MAAM,IAAIzE,MAAM,iBAAiBJ,KAE7C,CAIA,aAAA8E,CAAcrP,GACVxE,KAAKkC,KAAKR,QAAQkM,UAAY5N,KAAK4K,IACvC,CAIA,sBAAAQ,GACI,IAAI4D,EAAUhP,KAAK+L,cACnB,MAAM+H,EAAe9T,KAAKyK,cAAcqJ,aACxCA,EAAanI,MAAQqD,EAAUA,EAAQ7Q,MAAMU,MAAQ,GACrDiV,EAAa3V,MAAQ6Q,EAAUA,EAAQ7Q,MAAMW,QAAU,EAC3D,CAIA,kBAAA0M,GACI,IAAIwD,EAAUhP,KAAK+L,cACff,EAAW,GACXgE,GAAWA,aAAmB,EAAA3D,iBAC9BL,EAAWgE,EAAQ1D,QAAQpI,MAE/BlD,KAAKmF,oBAAoBxD,KAAK,CAC1BqJ,SAAUA,EACVC,SAAUjL,KAAKkF,eAEnBlF,KAAKkF,aAAe8F,CACxB,CAOA,cAAAqF,CAAe/C,EAAQxN,GACnB,IAAKwN,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAGlBQ,EAAUA,GAAWE,KAAKgG,kBAAkByH,IAAIH,IAAW,CAAC,EAC5DtN,KAAKgG,kBAAkB+J,IAAIzC,EAAQxN,GACnC,MAAM6K,EAAO,SAAU7K,EAAUA,EAAQ6K,KAAO1G,EAChDjE,KAAK4I,aAAahC,UAAU0G,EAAQ3C,GACpC3K,KAAKkK,mBACT,CAYA,cAAAsD,CAAeF,EAAQxN,GACnB,IAAKwN,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAGlBQ,EAAUA,GAAW,CAAC,EACtB,MAAMwM,EAAOtM,KAAK8H,WACZ8C,EAAO9K,EAAQ8K,MAAQ,YAC7B,IAAImJ,EAAM/T,KAAK+L,cACXjM,EAAQiU,MACRA,GAAM,IAAAlF,MAAKvC,EAAKI,WAAWf,GAASA,EAAMxF,KAAOrG,EAAQiU,OAAQ,MAErE,MAAM,MAAE5V,GAAUmP,EAGlBnP,EAAMuD,QAAU,IAAKvD,EAAMuD,QAASyE,GAAImH,EAAOnH,IAC3ChI,EAAM6V,gBAAgB,EAAAC,QAEtB9V,EAAM6V,KAAO7V,EAAM6V,KAAKE,UAAU,CAC9BC,WAAY,gBAGW,iBAAfhW,EAAM6V,MAAsB7V,EAAM6V,OAE9C7V,EAAMiW,WAAY,IAAAC,SAAQlW,EAAMiW,UAAW,YAE/C9H,EAAK1F,UAAU0G,EAAQ,CAAE1C,OAAMmJ,QAKb,oBAAdzH,EAAK1B,MACL5K,KAAK+F,kBAAkBgK,IAAIzC,EAAQxN,IAEd,IAArBA,EAAQ4N,UACRpB,EAAKG,eAAea,EAE5B,CAOA,eAAAiD,CAAgBjD,EAAQxN,GACpB,IAAKwN,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAIlB,MAAMqL,EAAO,SADb7K,EAAUA,GAAWE,KAAKgG,kBAAkByH,IAAIH,IAAW,CAAC,GAC3BxN,EAAQ6K,KAAO1G,EAChDjE,KAAKgG,kBAAkB+J,IAAIzC,EAAQxN,GACnCE,KAAK+I,cAAcnC,UAAU0G,EAAQ3C,GACrC3K,KAAKkK,mBACT,CAOA,aAAAsG,CAAclD,EAAQxN,GAClB,IAAIkO,EACJ,IAAKV,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAIlB,MAAMqL,EAA+B,QAAvBqD,GADdlO,EAAUA,GAAW,CAAC,GACK6K,YAAyB,IAAPqD,EAAgBA,EAAK/J,EAClEjE,KAAKsH,YAAYV,UAAU0G,EAAQ3C,GACnC3K,KAAKkK,oBACDlK,KAAKsH,YAAYH,MAAMmN,UACvBtU,KAAKsH,YAAYH,MAAMV,MAE/B,CAOA,cAAA6J,CAAehD,EAAQxN,GACnB,IAAIkO,EACJ,IAAKV,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAIlB,MAAMqL,EAA+B,QAAvBqD,GADdlO,EAAUA,GAAW,CAAC,GACK6K,YAAyB,IAAPqD,EAAgBA,EAAK/J,EAClEjE,KAAKiH,aAAaL,UAAU0G,EAAQ3C,GACpC3K,KAAKkK,oBACDlK,KAAKiH,aAAaE,MAAMmN,UACxBtU,KAAKiH,aAAaE,MAAMV,MAEhC,CAOA,gBAAA2J,CAAiB9C,EAAQxN,GAChBwN,EAAOnH,IAKZnG,KAAK8G,aAAaF,UAAU0G,GAC5BtN,KAAKkK,oBACDlK,KAAK8G,aAAawN,UAClBtU,KAAK8G,aAAaL,QAPlBlH,QAAQD,MAAM,2DAStB,CAOA,gBAAA4Q,CAAiB5C,EAAQxN,GAChBwN,EAAOnH,IAKZnG,KAAKwH,aAAaZ,UAAU0G,GAC5BtN,KAAKkK,oBACDlK,KAAKwH,aAAa8M,UAClBtU,KAAKwH,aAAaf,QAPlBlH,QAAQD,MAAM,2DAStB,CACA,cAAA6Q,CAAe7C,EAAQxN,GACnB,IAAKwN,EAAOnH,GAER,YADA5G,QAAQD,MAAM,4DAGlBQ,EAAUA,GAAW,CAAC,EACtB,MAAM,MAAE3B,GAAUmP,EAGlBnP,EAAMuD,QAAU,IAAKvD,EAAMuD,QAASyE,GAAImH,EAAOnH,IAC3ChI,EAAM6V,gBAAgB,EAAAC,QAEtB9V,EAAM6V,KAAO7V,EAAM6V,KAAKE,UAAU,CAC9BC,WAAY,gBAGW,iBAAfhW,EAAM6V,MAAsB7V,EAAM6V,OAE9C7V,EAAMiW,WAAY,IAAAC,SAAQlW,EAAMiW,UAAW,YAE/CpU,KAAKwI,WAAW5B,UAAU0G,GAC1BtN,KAAKkK,oBACDlK,KAAKwI,WAAW8L,UAChBtU,KAAKwI,WAAW/B,MAExB,CAIA,YAAA8I,CAAalG,GACT,MAAM2F,EAAUhP,KAAKiP,iBACrB,IAAKD,EACD,OAAO,KAEX,MAAMuF,EAAOrO,MAAMyG,KAAK3M,KAAK8H,WAAW0M,WAClC9E,EAAM6E,EAAK3R,OACXmQ,EAAQwB,EAAKE,QAAQzF,GAC3B,MAAkB,aAAd3F,EACO0J,EAAQ,EAAIwB,EAAKxB,EAAQ,GAAe,IAAVA,EAAcwB,EAAK7E,EAAM,GAAK,KAGhEqD,EAAQrD,EAAM,EACf6E,EAAKxB,EAAQ,GACbA,IAAUrD,EAAM,EACZ6E,EAAK,GACL,IACd,CAIA,cAAAtF,GACI,MAAMD,EAAUhP,KAAK2E,SAASoH,cAC9B,IAAKiD,EACD,OAAO,KAEX,MAAM7Q,EAAQ6Q,EAAQ7Q,MAChBoW,EAAOvU,KAAK8H,WAAW0M,UAC7B,OAAO,IAAA3F,MAAK0F,GAAMG,GAAOA,EAAIjG,OAAOgG,QAAQtW,IAAU,KAAM,IAChE,CAIA,gBAAA6L,CAAiBc,EAAQC,GACjBA,EAAKC,WACLD,EAAKC,SAAS7M,MAAMwW,WAAa,IAAI3Q,KAErC+G,EAAKE,WACLF,EAAKE,SAAS9M,MAAMwW,UAAY5J,EAAKE,SAAS9M,MAAMwW,UAAUC,QAAQ5Q,EAAc,KAExFhE,KAAK+E,eAAepD,KAAKoJ,EAC7B,CAIA,iBAAAjB,CAAkBgB,EAAQC,GAClBA,EAAKC,WACLD,EAAKC,SAAS7M,MAAMwW,WAAa,IAAI5Q,KAErCgH,EAAKE,WACLF,EAAKE,SAAS9M,MAAMwW,UAAY5J,EAAKE,SAAS9M,MAAMwW,UAAUC,QAAQ7Q,EAAe,KAEzF/D,KAAKiF,gBAAgBtD,KAAKoJ,GAC1B/K,KAAKkK,mBACT,CAIA,kBAAAI,GACwD,IAAhDtK,KAAKwI,WAAWW,aAAauD,QAAQ9J,QACrC5C,KAAKwI,WAAWkB,OAEpB1J,KAAKkK,mBACT,CAIA,iBAAAA,GACSlK,KAAKuF,iBAAiBsP,QAC/B,EAEJ,IAAI,GACJ,SAAWvW,GAOPA,EAAQwW,QAHR,SAAiBC,EAAOC,GACpB,OAAOD,EAAMpK,KAAOqK,EAAOrK,IAC/B,EAiBArM,EAAQsO,oBAZR,SAASA,EAAoBW,EAAQwB,GAC5BA,IAGa,aAAdA,EAAKtK,KAITsK,EAAK6E,SAASvG,SAAQ3I,IAClBkI,EAAoBW,EAAQ7I,EAAM,IAJlCqK,EAAKrC,QAAUqC,EAAKrC,QAAQiE,QAAOrD,IAAWA,EAAO2D,YAAc3D,EAAOC,SAAWA,IAM7F,EA0DAjP,EAAQ4I,aArDR,MACI,WAAArH,GAIIG,KAAKiV,gBAAkB,CAAC1Q,EAASC,KAC7B,OAAQA,EAAIC,MACR,IAAK,cACD,CACI,MAAM6I,EAAS9I,EAAIE,MAEnB,GAAI1E,KAAKkV,OAAOrG,MAAKsG,GAAKA,EAAE7H,SAAWA,IACnC,MAGJ,MAAM3C,EAAO3K,KAAKkV,OAAOlV,KAAKkV,OAAOtS,OAAS,GAAG+H,KACjD3K,KAAKkV,OAAOrF,KAAK,CAAEvC,SAAQ3C,QAC/B,CACA,MACJ,IAAK,gBACD,CACI,MAAM2C,EAAS9I,EAAIE,MACnB,EAAAmO,SAASuC,iBAAiBpV,KAAKkV,QAAQC,GAAKA,EAAE7H,SAAWA,GAC7D,EAKR,OAAO,CAAI,EAEftN,KAAKkV,OAAS,IAAIhP,MAClBlG,KAAKqV,OAAS,IAAI,EAAA1O,MAClB,EAAAwB,YAAYC,mBAAmBpI,KAAKqV,OAAQrV,KAAKiV,gBACrD,CAIA,SAAI9N,GACA,OAAOnH,KAAKqV,MAChB,CAMA,SAAAzO,CAAU0G,EAAQ3C,GACd2C,EAAOC,OAAS,KAChB,MAAM+H,EAAO,CAAEhI,SAAQ3C,QACjBoI,EAAQ,EAAAF,SAAS0C,WAAWvV,KAAKkV,OAAQI,EAAMhX,EAAQwW,SAC7D,EAAAjC,SAAS2C,OAAOxV,KAAKkV,OAAQnC,EAAOuC,GACpCtV,KAAKqV,OAAOxK,aAAakI,EAAOzF,EACpC,GA0RJhP,EAAQuK,eApRR,MAII,WAAAhJ,GACIG,KAAKyV,iBAAkB,EACvBzV,KAAKkV,OAAS,IAAIhP,MAClBlG,KAAK0V,SAAW,IAAI,EAAAxV,OAAOF,MAC3BA,KAAK2V,SAAW,IAAI,EAAAC,OAAO,CACvBC,eAAgB,OAChBC,eAAgB,OAChBC,eAAe,EACfzM,YAAa,aAEjBtJ,KAAKgW,cAAgB,IAAI,EAAAC,aACzBjW,KAAK2V,SAASjM,OACd1J,KAAKgW,cAActM,OACnB1J,KAAKkW,aAAe,KACpBlW,KAAK2V,SAAS/L,eAAeC,QAAQ7J,KAAK8J,kBAAmB9J,MAC7DA,KAAK2V,SAASQ,qBAAqBtM,QAAQ7J,KAAKoW,wBAAyBpW,MACzEA,KAAKgW,cAAczL,cAAcV,QAAQ7J,KAAKqW,iBAAkBrW,KACpE,CAIA,aAAIwR,GACA,OAAOxR,KAAK2V,SAASnE,SACzB,CAIA,WAAItI,GACA,OAAOlJ,KAAK2V,QAChB,CAIA,gBAAIxM,GACA,OAAOnJ,KAAKgW,aAChB,CAIA,WAAI7L,GACA,OAAOnK,KAAK0V,QAChB,CAIA,cAAAY,GACI,OAAOtW,KAAKuW,oBAChB,CAIA,kBAAAC,CAAmB1L,EAAQiI,GACvB,OAAO/S,KAAKuW,oBAChB,CAQA,MAAApF,GACI,MAAMsF,EAAWzW,KAAKkW,cAAiBlW,KAAKkV,OAAOtS,OAAS,GAAK5C,KAAKkV,OAAO,GAAG5H,OAC5EmJ,GACAzW,KAAK0N,SAAS+I,EAAStQ,GAE/B,CAMA,QAAAuH,CAASvH,GACL,MAAMmH,EAAStN,KAAK0W,gBAAgBvQ,GAChCmH,IACAtN,KAAK2V,SAAS1J,aAAeqB,EAAOnP,MACpCmP,EAAOI,WAEf,CAIA,GAAAa,CAAIpI,GACA,OAAoC,OAA7BnG,KAAK0W,gBAAgBvQ,EAChC,CAIA,QAAA2K,GACI9Q,KAAK2V,SAAS1J,aAAe,IACjC,CAMA,SAAArF,CAAU0G,EAAQ3C,GACd,IAAIqD,EAAI6D,EAAIC,EAAIC,EAChBzE,EAAOC,OAAS,KAChBD,EAAO5D,OACP,MAAM4L,EAAO,CAAEhI,SAAQ3C,QACjBoI,EAAQ/S,KAAK2W,iBAAiBrB,GACpC,EAAAzC,SAAS2C,OAAOxV,KAAKkV,OAAQnC,EAAOuC,GACpCtV,KAAKgW,cAAcnL,aAAakI,EAAOzF,GACvC,MAAMnP,EAAQ6B,KAAK2V,SAAS1C,UAAUF,EAAOzF,EAAOnP,OAGpDA,EAAMuD,QAAU,CAAEyE,GAAImH,EAAOnH,IACzBhI,EAAM6V,gBAAgB,EAAAC,QAEtB9V,EAAM6V,KAAO7V,EAAM6V,KAAKE,UAAU,CAC9BC,WAAY,YAGW,iBAAfhW,EAAM6V,MAAmC,IAAd7V,EAAM6V,KAE7C7V,EAAMiW,WAAY,IAAAC,SAAQlW,EAAMiW,UAAW,UAAW,cAEhDjW,EAAM6V,MAAS7V,EAAMU,QAE3BV,EAAM6V,KAAO,EAAA4C,QAAQ1C,UAAU,CAC3BC,WAAY,aAIsE,QAAzFtC,EAA+B,QAAzB7D,EAAKV,EAAOuJ,eAA4B,IAAP7I,OAAgB,EAASA,EAAG8I,wBAAqC,IAAPjF,GAAyBA,EAAGhI,QAAQ7J,KAAKwW,mBAAoBxW,MAE1E,QAApF+R,EAA+B,QAAzBD,EAAKxE,EAAOuJ,eAA4B,IAAP/E,OAAgB,EAASA,EAAGiF,mBAAgC,IAAPhF,GAAyBA,EAAGlI,QAAQ7J,KAAKsW,eAAgBtW,MACtJA,KAAKuW,oBACT,CAIA,SAAAnD,GACI,MAAM4D,EAA2C,OAA/BhX,KAAK2V,SAAS1J,aAC1BS,EAAUxG,MAAMyG,KAAK3M,KAAKgW,cAActJ,SACxCX,EAAgBW,EAAQ1M,KAAK2V,SAAS/G,cACtCqI,EAAe,CAAC,EAStB,OARAjX,KAAKgW,cAActJ,QAAQW,SAAS6J,IAC5BA,EAAE/Q,IAAM+Q,EAAEL,mBAAmB,EAAAtN,aAC7B0N,EAAaC,EAAE/Q,IAAM,CACjBgR,MAAOD,EAAEL,QAAQxE,gBACjB+E,gBAAiBF,EAAEL,QAAQnK,QAAQgG,KAAI2E,GAAMA,EAAG7F,aAExD,IAEG,CACHwF,YACAjL,gBACAuL,SAAUtX,KAAKyV,gBACf/I,UACAuK,eAER,CAIA,SAAA/D,CAAUqE,GACFA,EAAKxL,eACL/L,KAAK0N,SAAS6J,EAAKxL,cAAc5F,IAEjCoR,EAAKP,WACLhX,KAAK8Q,WAEJyG,EAAKD,SACNtX,KAAK0J,OAEL6N,EAAKN,cACLjX,KAAKgW,cAActJ,QAAQW,SAAS6J,IAChC,IAAIlJ,EACJ,GAAIkJ,EAAE/Q,IAAM+Q,EAAEL,mBAAmB,EAAAtN,WAAY,CACzC,MAAMiO,EAA2C,QAAlCxJ,EAAKuJ,EAAKN,aAAaC,EAAE/Q,WAAwB,IAAP6H,EAAgBA,EAAK,CAAC,EAC/EkJ,EAAEL,QAAQnK,QAAQW,SAAQ,CAACgK,EAAII,KAC3B,IAAIzJ,EACJ,MAAM0J,GAA8C,QAAhC1J,EAAKwJ,EAAMJ,uBAAoC,IAAPpJ,EAAgBA,EAAK,IAAIyJ,GAC5D,kBAAdC,GACPR,EAAEL,mBAAmB,EAAAc,iBACrBD,EAAYR,EAAEL,QAAQ1F,OAAOsG,GAAQP,EAAEL,QAAQ/F,SAAS2G,GAC5D,IAEAD,EAAML,OACND,EAAEL,QAAQpN,iBAAiB+N,EAAML,MAEzC,IAGZ,CAIA,IAAAzN,GACI1J,KAAKyV,iBAAkB,EACvBzV,KAAKuW,oBACT,CAIA,IAAA9P,GACIzG,KAAKyV,iBAAkB,EACvBzV,KAAKuW,oBACT,CAIA,gBAAAI,CAAiBrB,GACb,OAAO,EAAAzC,SAAS0C,WAAWvV,KAAKkV,OAAQI,EAAMhX,EAAQwW,QAC1D,CAIA,gBAAA8C,CAAiBtK,GACb,OAAO,EAAAuF,SAASgF,eAAe7X,KAAKkV,QAAQ4C,GAAKA,EAAExK,SAAWA,GAClE,CAIA,kBAAAyK,CAAmB5Z,GACf,MAAMmX,GAAO,IAAAzG,MAAK7O,KAAKkV,QAAQvJ,GAASA,EAAM2B,OAAOnP,QAAUA,IAC/D,OAAOmX,EAAOA,EAAKhI,OAAS,IAChC,CAIA,eAAAoJ,CAAgBvQ,GACZ,MAAMmP,GAAO,IAAAzG,MAAK7O,KAAKkV,QAAQvJ,GAASA,EAAM2B,OAAOnH,KAAOA,IAC5D,OAAOmP,EAAOA,EAAKhI,OAAS,IAChC,CAIA,kBAAAiJ,GACIvW,KAAKgW,cAAczD,UAAyC,OAA/BvS,KAAK2V,SAAS1J,cAC3CjM,KAAK2V,SAASpD,UAAUvS,KAAKyV,iBAAmD,IAAhCzV,KAAK2V,SAASlH,OAAO7L,QACrE5C,KAAK0V,SAAS/T,MAClB,CAIA,iBAAAmI,CAAkBgB,EAAQC,GACtB,MAAMiN,EAAYjN,EAAKkN,cACjBjY,KAAK+X,mBAAmBhN,EAAKkN,eAC7B,KACAC,EAAYnN,EAAKkB,aACjBjM,KAAK+X,mBAAmBhN,EAAKkB,cAC7B,KACF+L,GACAA,EAAUtO,OAEVwO,GACAA,EAAUzR,OAEdzG,KAAKkW,aAAegC,GAAaF,EACjChY,KAAKuW,oBACT,CAIA,uBAAAH,CAAwBtL,EAAQC,GAC5BA,EAAK5M,MAAMwQ,MAAMjB,UACrB,CAIA,gBAAA2I,CAAiBvL,EAAQwC,GACjBA,IAAWtN,KAAKkW,eAChBlW,KAAKkW,aAAe,MAExB,EAAArD,SAASsF,SAASnY,KAAKkV,OAAQlV,KAAK4X,iBAAiBtK,IACrDtN,KAAK2V,SAASyC,UAAU9K,EAAOnP,OAC/B6B,KAAKuW,oBACT,GAGJ,MAAM/P,UAAuB,EAAAnC,OAIzB,WAAAxE,CAAYM,GACRJ,QACAC,KAAKI,SAAS,eACdJ,KAAKmG,GAAK,cACVnG,KAAKqY,OAASlY,EACdH,KAAKsY,gBAAgB,qBAAsB,OAC/C,CACA,WAAAC,CAAYjW,GACR,IAAI0L,EAAI6D,EAEC,UADDvP,EAAMmC,MAEFnC,EAAMN,kBAAkBG,aACxBnC,KAAKqY,OAAOvJ,aAA4F,QAA9E+C,EAA6B,QAAvB7D,EAAK1L,EAAMN,cAA2B,IAAPgM,OAAgB,EAASA,EAAGtM,eAA4B,IAAPmQ,OAAgB,EAASA,EAAG2G,WAI5J,CAIA,aAAA3E,CAAcrP,GACVzE,MAAM8T,cAAcrP,GACpBxE,KAAKkC,KAAKuW,iBAAiB,QAASzY,KACxC,CAKA,cAAA0Y,CAAelU,GACXxE,KAAKkC,KAAKyW,oBAAoB,QAAS3Y,MACvCD,MAAM2Y,eAAelU,EACzB,CACA,eAAA8T,CAAgBM,EAAc7J,GAC1B,MAAM8J,EAAWpX,SAASqX,cAAc,KACxCD,EAASE,KAAO,IAChBF,EAASrK,SAAW,EACpBqK,EAASG,KAAOJ,EAChBC,EAASlE,UAAY,YACrBkE,EAASnX,QAAoB,WAAIqN,EACjC/O,KAAKkC,KAAK+W,YAAYJ,EAC1B,EAEJva,EAAQkI,eAAiBA,EACzB,MAAMkE,UAAqB,EAAArG,OAIvB,WAAAxE,CAAYM,GACRJ,QACAC,KAAKkZ,WAAY,EACjB,MAAMpF,EAAerS,SAASqX,cAAc,SAC5ChF,EAAarP,KAAO,OACpBzE,KAAKkC,KAAK+W,YAAYnF,GACtB9T,KAAKqY,OAASlY,EACdH,KAAKmG,GAAK,sBACd,CAIA,aAAA0N,CAAcrP,GACVzE,MAAM8T,cAAcrP,GACpBxE,KAAK8T,aAAa2E,iBAAiB,QAASzY,MAC5CA,KAAK8T,aAAa2E,iBAAiB,QAASzY,MAC5CA,KAAK8T,aAAa2E,iBAAiB,OAAQzY,KAC/C,CAIA,cAAA0Y,CAAelU,GACXzE,MAAM2Y,eAAelU,GACrBxE,KAAK8T,aAAa6E,oBAAoB,QAAS3Y,MAC/CA,KAAK8T,aAAa6E,oBAAoB,QAAS3Y,MAC/CA,KAAK8T,aAAa6E,oBAAoB,OAAQ3Y,KAClD,CACA,WAAAuY,CAAYjW,GACR,OAAQA,EAAMmC,MACV,IAAK,QACIzE,KAAKmZ,UAAU7W,GACpB,MACJ,IAAK,QACDtC,KAAKoZ,UAAU9W,GACf,MACJ,IAAK,OACDtC,KAAKkZ,WAAY,EAG7B,CAIA,eAAMC,CAAU7W,GACZ,GAAiB,SAAbA,EAAM+W,IAAgB,CACtB,MAAM/L,EAAStN,KAAKqY,OAAOtM,cAC3B,GAAc,MAAVuB,EACA,OAEJ,MAAMgM,EAAUhM,EAAOnP,MAAMU,MACvBiV,EAAe9T,KAAK8T,aACpByF,EAAUzF,EAAanI,MAC7BmI,EAAa0F,OACTD,IAAYD,EACZhM,EAAOnP,MAAMU,MAAQ0a,EAGrBzF,EAAanI,MAAQ2N,CAE7B,CACJ,CAIA,SAAAF,CAAU9W,GAEN,GAAqB,IAAjBA,EAAMmX,QAAgBzZ,KAAKkZ,UAC3B,OAEJ,MAAMpF,EAAe9T,KAAK8T,aAC1BxR,EAAMS,iBACNT,EAAMU,kBACNhD,KAAKkZ,WAAY,EACjB,MAAMQ,EAAY5F,EAAanI,MAAM8I,QAAQ,MAC1B,IAAfiF,EACA5F,EAAa6F,SAGb7F,EAAa8F,kBAAkB,EAAGF,EAE1C,CAIA,gBAAI5F,GACA,OAAO9T,KAAKkC,KAAK0R,SAAS,EAC9B,EAEJtV,EAAQoM,aAAeA,EACvB,MAAM9C,UAA6B,EAAA2B,WAC/B,WAAA1J,CAAYC,EAAU,CAAC,GACnBC,MAAMD,GACNE,KAAKmK,QAAU,IAAI,EAAAjK,OAAOF,KAC9B,CAIA,eAAA6Z,CAAgBrV,GACZzE,MAAM8Z,gBAAgBrV,GACtBxE,KAAKmK,QAAQxI,MACjB,EAEJrD,EAAQsJ,qBAAuBA,CAClC,CAngBD,CAmgBG,IAAY,EAAU,CAAC,I,IC58CtB,E,WC1SG,MAAMkS,EAIT,WAAAja,CAAYka,GACR/Z,KAAKga,WAAa,EAClBha,KAAKia,YAAc,EACnBja,KAAKka,YAAc,IAAI,EAAAha,OAAO6Z,GAC9B/Z,KAAKma,aAAe,IAAI,EAAAja,OAAO6Z,EACnC,CAIA,cAAIK,GACA,OAAOpa,KAAKka,WAChB,CAIA,eAAIG,GACA,OAAOra,KAAKma,YAChB,CAIA,UAAIG,GACA,OAAOta,KAAKga,WAAa,CAC7B,CAIA,WAAIO,GACA,OAAOva,KAAKia,YAAc,CAC9B,CAMA,QAAAO,GACI,MAAMC,EAAWza,KAAKua,QAKtB,OAJAva,KAAKia,cACDja,KAAKua,UAAYE,GACjBza,KAAKma,aAAaxY,KAAK3B,KAAKua,SAEzB,IAAI,EAAAG,oBAAmB,KAC1B,MAAMD,EAAWza,KAAKua,QACtBva,KAAKia,YAAcU,KAAKC,IAAI,EAAG5a,KAAKia,YAAc,GAC9Cja,KAAKua,UAAYE,GACjBza,KAAKma,aAAaxY,KAAK3B,KAAKua,QAChC,GAER,CAMA,OAAAM,GACI,MAAMC,EAAU9a,KAAKsa,OAKrB,OAJAta,KAAKga,aACDha,KAAKsa,SAAWQ,GAChB9a,KAAKka,YAAYvY,KAAK3B,KAAKsa,QAExB,IAAI,EAAAI,oBAAmB,KAC1B,MAAMI,EAAU9a,KAAKsa,OACrBta,KAAKga,aACDha,KAAKsa,SAAWQ,GAChB9a,KAAKka,YAAYvY,KAAK3B,KAAKsa,OAC/B,GAER,EDjEG,MAAMS,UAAmBpb,EAI5B,WAAAE,CAAYC,EAAU,CAAEK,MAAO,IAAIiE,IAC/BrE,MAAM,IACCD,EACHK,MAAOL,EAAQK,OAAS,IAAIiE,EAC5B/C,eAAgBvB,EAAQuB,gBACpB,IAAI,EAAAC,eAAe,CACf0Z,QAAS,KACGhb,KAAKib,MAAMC,aAAe,kBAOlDlb,KAAKmb,KAAO,EAAAC,WAAWC,UAAU,YAAc,aAI/Crb,KAAKsb,UAAY,EAAAF,WAAWC,UAAU,iBAAmBrb,KAAKmb,KAI9Dnb,KAAKub,qBAAuB,GAI5Bvb,KAAKwb,OAAS,IAAI1B,EAAU9Z,MAI5BA,KAAKyb,QAAU,EAAAL,WAAWC,UAAU,eAAiB,UACrDrb,KAAKib,MAAQF,EAAWW,YACxB1b,KAAK2b,qBAAuB,IAAI,EAAAjW,gBAEhC,MAAMkW,EAAOC,OAAOC,KAAKf,EAAWW,aAAaK,QAAO,CAACC,EAAKC,KACtDA,KAAOnc,IACPkc,EAAIC,GAAOC,KAAKC,MAAMD,KAAKE,UAAUtc,EAAQmc,MAE1CD,IACR,CAAC,GAEJhc,KAAKib,MAAQ,IAAKF,EAAWW,eAAgBE,GAC7C5b,KAAKY,SAAWZ,KAAKG,MAAMS,SACtB1B,MAAKtB,UACN,MAAMye,EAAY,GACZC,EAAWtc,KAAKuc,0BAA0Bld,OAAMC,IAClDC,QAAQD,MAAM,4CAA6CA,EAAM,IAGrE,GADA+c,EAAUxM,KAAKyM,GACXtc,KAAKib,MAAMqB,SAAU,CACrB,MAAME,EAAqB3b,QAAQ4b,IAAIzc,KAAKib,MAAMqB,SAASI,QAAQhK,KAAIiK,GAAY3c,KAAK4c,eAAeD,MAAYtd,OAAMC,IACrHC,QAAQD,MAAM,+DAAgEA,EAAM,IAExF+c,EAAUxM,KAAK2M,EACnB,CACA3b,QAAQ4b,IAAIJ,GACPnd,MAAK,KACNc,KAAK2b,qBAAqB7a,SAAS,IAElCzB,OAAM,KAAe,GAAC,IAE1BA,OAAM,KAAe,IAE1B,MAAMwd,EAAc9B,EAAW+B,aAAaxZ,KACtCyZ,EAAchC,EAAW+B,aAAaE,YACtCC,EAAcnd,EAAQqD,OAASrD,EAAQqD,MAAMG,MAAS,CAAC,EACvD4Z,EAAcpd,EAAQqD,OAASrD,EAAQqD,MAAM6Z,aAAgB,CAAC,EA4BpE,GA3BAhd,KAAKmd,OAAS,CACV7Z,KAAMuY,OAAOC,KAAKe,GAAad,QAAO,CAACC,EAAK3C,KACxC,GAAIA,KAAO4D,EAAY,CACnB,MAAMtR,EAAQsR,EAAW5D,GACzB2C,EAAI3C,GAAO1N,CACf,MAEIqQ,EAAI3C,GAAOwD,EAAYxD,GAE3B,OAAO2C,CAAG,GACX,CAAC,GACJgB,YAAanB,OAAOC,KAAKf,EAAW+B,aAAaE,aAAajB,QAAO,CAACC,EAAK3C,KACvE,GAAIA,KAAO6D,EAAY,CACnB,MAAMvR,EAAQuR,EAAW7D,GACzB2C,EAAI3C,GAAO1N,CACf,MAEIqQ,EAAI3C,GAAO0D,EAAY1D,GAE3B,OAAO2C,CAAG,GACX,CAAC,IAEJhc,KAAKib,MAAMmC,SACXpd,KAAKG,MAAMC,SAAS,kBAGxBJ,KAAKkB,YAAYmc,gBAAgB,IAAI,EAAAC,oBACjCxd,EAAQyd,eACR,IAAK,MAAMC,KAAU,QAAwB1d,EAAQyd,gBACjDvd,KAAKyd,eAAeD,EAGhC,CAIA,QAAI5B,GACA,OAAO5b,KAAKib,KAChB,CAIA,SAAI9X,GACA,OAAOnD,KAAKmd,MAChB,CAIA,uBAAIO,GACA,OAAO1d,KAAK2b,qBAAqB5N,OACrC,CAMA,oBAAA4P,CAAqBC,GACjB,IAAIrG,EAAOqG,EAAIC,QAEVD,EAAIE,eAAe,gBACpBvG,EAAOqG,GAEN1X,MAAM6X,QAAQxG,KACfA,EAAO,CAACA,IAEZA,EAAKlK,SAAQiI,IACT,IACItV,KAAKyd,eAAenI,EACxB,CACA,MAAOhW,GACHU,KAAKub,qBAAqB1L,KAAKvQ,EACnC,IAER,CAMA,qBAAA0e,CAAsBC,GAClBA,EAAK5Q,SAAQuQ,IACT5d,KAAK2d,qBAAqBC,EAAI,GAEtC,CAMA,UAAAM,CAAWC,GACP,MAAMC,EAAsB,IAAI,EAAA1Y,gBAEhC1F,KAAKO,SAAS8d,wBAAwBF,EAAcC,EAAoBrQ,SAExE/N,KAAKO,SAAS+d,oBAAoBH,GAKlC,MAAMnc,EAASmc,EAAanc,OAC5B,IAAKA,EACD,OAAOoc,EAAoBtd,SAAQ,GAEvC,IAAIyd,EAAgB,KAChBC,EAAgB,KACpB,MAAMC,EAAsB,KACpBF,GACAvc,EAAO2W,oBAAoB,cAAe4F,GAE1CC,GACAxc,EAAO2W,oBAAoB,QAAS6F,EACxC,EAGuB3d,QAAQ6d,KAAK,CACpC,IAAI7d,SAAQC,IACRyd,EAAiBI,IACb,OAAQA,EAAWC,WACf,IAAK,cACL,IAAK,cACD,GAAID,EAAW3c,kBAAkB6c,SAC7BF,EAAW3c,OAAO6B,QAAQ,oBAI1B,OAFA8a,EAAW5b,iBACX0b,IACO3d,GAAQ,GAEnB,MAEJ,IAAK,kBACD,GAAI6d,EAAW3c,kBAAkB6c,SAC7BF,EAAW3c,OAAO6B,QAAQ,YAI1B,OAFA8a,EAAW5b,iBACX0b,IACO3d,GAAQ,GAM3B,OADA2d,IACO3d,GAAQ,EAAK,EAExBkB,EAAOyW,iBAAiB,cAAe8F,EAAe,CAAEO,MAAM,GAAO,IAEzE,IAAIje,SAAQC,IACR0d,EAAiBO,IACb,GAAIA,EAAWC,OAASb,EAAaa,KAEjC,OADAP,IACO3d,GAAQ,EACnB,EAEJkB,EAAOyW,iBAAiB,QAAS+F,EAAe,CAAEM,MAAM,GAAO,IAEnE,IAAIje,SAAQC,IACRme,YAAW,KACPR,IACO3d,GAAQ,KAChB,EAAQoe,oBAAoB,MAIlChgB,MAAKigB,IACNf,EAAoBtd,SAASqe,EAAe,IAE3C9f,MAAME,QAAQ6f,KACvB,GAKJ,SAAWrE,GAIPA,EAAWsE,MAAQ,IAAI,EAAA3b,MAAM,gCAAiC,8HAI9DqX,EAAWW,YAAc,CACrB0B,QAA2D,SAAlD,EAAAhC,WAAWC,UAAU,WAAWiE,cACzChD,SAAU,CAAEiD,SAAU,GAAI7C,QAAS,IACnC8C,SAAU,CAAED,SAAU,GAAI7C,QAAS,IACnCa,eAAgB,GAChBkC,iBAAkB,GAClBC,YAAkE,SAArD,EAAAtE,WAAWC,UAAU,cAAciE,cAChDpE,aAAa,GAKjBH,EAAW+B,aAAe,CACtBxZ,KAAM,CACFqc,KAAM,EAAAvE,WAAWC,UAAU,WAC3BuE,SAAU,EAAAxE,WAAWC,UAAU,eAC/BtB,IAAK,EAAAqB,WAAWC,UAAU,UAC1B9X,IAAK,EAAA6X,WAAWC,UAAU,UAC1BwE,OAAQ,EAAAzE,WAAWC,UAAU,aAC7ByE,SAAU,EAAA1E,WAAWC,UAAU,eAC/B0E,OAAQ,EAAA3E,WAAWC,UAAU,aAC7B2E,aAAc,EAAA5E,WAAWC,UAAU,sBACnC4E,QAAS,EAAA7E,WAAWC,UAAU,iBAAc5b,EAC5CygB,UAAW,EAAA9E,WAAWC,UAAU,mBAAgB5b,EAChD0gB,QAAS,EAAA/E,WAAWC,UAAU,iBAAc5b,EAC5C2gB,cAAe,EAAAhF,WAAWC,UAAU,uBAAoB5b,GAE5Dud,YAAa,CACTqD,YAAa,EAAAjF,WAAWC,UAAU,kBAClCiF,QAAS,EAAAlF,WAAWC,UAAU,cAC9BwE,OAAQ,EAAAzE,WAAWC,UAAU,aAC7BkF,UAAW,EAAAnF,WAAWC,UAAU,gBAChC0E,OAAQ,EAAA3E,WAAWC,UAAU,aAC7BmF,aAAc,EAAApF,WAAWC,UAAU,mBACnCoF,WAAY,EAAArF,WAAWC,UAAU,cACjCqF,WAAY,EAAAtF,WAAWC,UAAU,kBAG5C,CA9CD,CA8CGN,IAAeA,EAAa,CAAC,IAKhC,SAAWzc,GASPA,EAAQ4gB,oBAAsB,EACjC,CAVD,CAUG,IAAY,EAAU,CAAC,I,cEjTnB,MAAMyB,EAIT,WAAA9gB,CAAYC,GAKRE,KAAK4gB,KAAO,IAAI,EAAAld,MAAM,uCACtB1D,KAAK6gB,QAAU,IAAI,EAAA3gB,OAAOF,MAC1BA,KAAK8gB,OAAS,IAAIhb,IAClB9F,KAAK2f,KAAO7f,EAAQ6f,KACpB3f,KAAKO,SAAWT,EAAQS,QAC5B,CAIA,WAAIyO,GACA,IAAIhB,EAAI6D,EACR,MAAM,KAAE8N,GAAS3f,KACX+gB,EAAS,EAAAC,OAAO7E,MAAM8E,OAAOC,SAASnI,OACtC,OAAEoI,EAAM,KAAEC,GAASL,EACnB7d,EAAoG,QAA5F2O,EAAgC,QAA1B7D,EAAK+S,EAAOM,gBAA6B,IAAPrT,OAAgB,EAASA,EAAG4G,QAAQ+K,EAAM,YAAyB,IAAP9N,EAAgBA,EAAK,GAEvI,MAAO,CAAEuP,OAAMle,OAAMoe,QADLpe,EAAOie,EAASC,EACFD,SAClC,CAIA,UAAII,GACA,OAAOvhB,KAAK6gB,OAChB,CAQA,QAAAW,CAASte,EAAMpD,EAAU,CAAC,GACtB,MAAM,KAAE6f,GAAS3f,MACX,QAAEyhB,GAAYR,QACd,KAAES,GAAS5hB,EACX6hB,EAAMlgB,SAASyf,SAASnI,KACxB6I,EAAM1e,GAA+B,IAAvBA,EAAKuR,QAAQkL,GAAczc,EAAO,EAAA8d,OAAOa,KAAKlC,EAAMzc,GACxE,OAAI0e,IAAQD,EACDD,EAAO1hB,KAAK8hB,cAAWriB,GAElCgiB,EAAQM,UAAU,CAAC,EAAG,GAAIH,GACtBF,EACO1hB,KAAK8hB,cAEXhiB,EAAQkiB,aAGTjhB,uBAAsB,KACbf,KAAKiiB,OAAO,KAG7B,CAQA,QAAAC,CAASpiB,GACL,IAAIkO,EACJ,MAAM,QAAEnL,EAAO,QAAEsf,GAAYriB,EACvB6K,EAA+B,QAAvBqD,EAAKlO,EAAQ6K,YAAyB,IAAPqD,EAAgBA,EAAK,IAC5DoU,EAAQpiB,KAAK8gB,OAEnB,OADAsB,EAAMrS,IAAIoS,EAAS,CAAEtf,UAAS8H,SACvB,IAAI,EAAA+P,oBAAmB,KAC1B0H,EAAMnS,OAAOkS,EAAQ,GAE7B,CAIA,MAAAL,GACIb,OAAOC,SAASY,QACpB,CAQA,KAAAG,GACI,MAAM,SAAE1hB,EAAQ,QAAEyO,EAAO,KAAE4R,GAAS5gB,MAC9B,QAAEshB,GAAYtS,EACduS,EAASvhB,KAAK6gB,QACduB,EAAQpiB,KAAK8gB,OACbpE,EAAU,GAEhB0F,EAAM/U,SAAQ,CAACgV,EAAMF,MACbb,aAAyC,EAASA,EAAQ9d,MAAM2e,KAChEzF,EAAQ7M,KAAKwS,EACjB,IAGJ,MAAMC,EAAQ5F,EAAQ6F,MAAK,CAACC,EAAGC,IAAMA,EAAE9X,KAAO6X,EAAE7X,OAC1C+X,EAAO,IAAI,EAAAhd,gBAGXid,EAAO/kB,UACT,IAAK0kB,EAAM1f,OAGP,OAFA2e,EAAO5f,KAAKqN,QACZ0T,EAAK5hB,aAAQrB,GAGjB,MAAM,QAAEoD,GAAYyf,EAAMM,MAC1B,IACI,MAAMtB,EAAUthB,KAAKgP,QAAQsS,cACR/gB,EAASsiB,QAAQhgB,EAASmM,KAChC4R,IACX0B,EAAM1f,OAAS,EACfrD,QAAQ2P,MAAM,WAAWoS,4BAAkCze,KAEnE,CACA,MAAOuK,GACH7N,QAAQ6f,KAAK,WAAWkC,QAAcze,WAAkBuK,EAC5D,CACKuV,GAAM,EAGf,OADKA,IACED,EAAK3U,OAChB,ECtIG,MAAM+U,EAAkB,IAAI,EAAApf,MAAM,0CAA2C,iNAMvEqf,EAAa,IAAI,EAAArf,MAAM,qCAAsC,2PAM7Dsf,EAAU,IAAI,EAAAtf,MAAM,kCAAmC,kKCXvDuf,EAAmB,IAAI,EAAAvf,MAAM,2CAA4C,sCCG/E,SAASwf,EAAmBpjB,GAC/B,MAAM,GAAEqG,EAAE,SAAE5F,EAAQ,MAAEJ,EAAK,iBAAEgjB,EAAkBtF,QAASuF,EAAa,UAAEC,EAAS,MAAErlB,GAAU8B,EAC5FS,EAAS+iB,WAAWnd,EAAI,IACjBod,EAAsB,CAAEhjB,WAAUJ,SAASgjB,EAAkBC,QAAqDA,EAAgB,CAAC,EAAGplB,QAAqCA,EAAQ,EAAAC,eAAeC,KAAK,kBACvMmlB,IAEP,MAAMG,EAActd,MAAM6X,QAAQoF,GAC5BA,EACA,CAACA,GACDM,EAAmB,CAACljB,EAAUwK,KAChC,GAAIA,EAAK5E,GACL,GAAI4E,EAAK5E,KAAOA,GAAoB,YAAd4E,EAAKtG,KACvBlE,EAASmjB,eAAevY,WAAWsY,QAInC,GADmBD,EAAYzH,QAAO,CAAC4H,EAAKC,IAAQD,EAAIE,OAAOD,EAAIE,MAAM,IAC1DnR,SAAS5H,EAAK5E,IACzB,OAAQ4E,EAAKtG,MACT,IAAK,UACL,IAAK,eACDlE,EAASwjB,qBAAqB5d,GAC9B,MACJ,IAAK,UACD,IAAK,MAAMyd,KAAOJ,EACdI,EAAI9e,OAAOiG,EAAK5E,IAMxC,EAEJ5F,EAASmjB,eAAe7Z,QAAQ4Z,EACpC,CAcO,SAASF,EAAsBxJ,EAAKoJ,EAAkBC,EAAeplB,GACxE,MAAM,SAAEuC,EAAQ,MAAEJ,GAAU4Z,EACtByJ,EAActd,MAAM6X,QAAQoF,GAC5BA,EACA,CAACA,GACP,MAAO,CACHtkB,MAAOmlB,EAAiB,SACxBllB,QAASklB,EAAiB,WAC1BC,UAAW,KACP,IAAIjW,EACJ,MAAMiW,EAAYC,EAAgB,aAClC,OAASD,EAAUrhB,OAAS,IACvBqhB,EAAUE,MAAKC,IAAuB,IAAZA,KACS,QAAlCpW,EAAKoV,EAAca,iBAA8B,IAAPjW,GAAgBA,CAAY,EAEhFqW,UAAW,KACP,IAAIrW,EAEJ,OADkBkW,EAAgB,aAChBC,MAAKC,IAAuB,IAAZA,KACM,QAAlCpW,EAAKoV,EAAciB,iBAA8B,IAAPrW,GAAgBA,CAAY,EAEhFwD,UAAW,KACP,IAAIxD,EACJ,MAAMwD,EAAY0S,EAAgB,aAClC,OAAS1S,EAAU5O,OAAS,IACvB4O,EAAU2S,MAAK7M,IAAuB,IAAZA,KACS,QAAlCtJ,EAAKoV,EAAc5R,iBAA8B,IAAPxD,GAAgBA,CAAW,EAE/E6U,QAASjlB,UACL,MAAM0P,EAASnN,EAAM4L,cAEfuY,EADad,EAAY9Q,KAAIkR,GAAkB,OAAXtW,EAAkBsW,EAAIW,mBAAmBjX,GAAU,OAChEqD,QAAO6T,GAA2B,OAAdA,GAAsBjkB,EAAS0jB,UAAUO,KAC1F,IAAIrlB,EAAS,KACb,GAAImlB,EAAU1hB,OAAS,GACnB,IAAK,MAAM4hB,KAAaF,EAEpB,GADAnlB,QAAeoB,EAASsiB,QAAQ2B,GACV,kBAAXrlB,IAAmC,IAAXA,EAG/B,WAIHikB,EAAcP,UACnB1jB,QAAeoB,EAASsiB,QAAQO,EAAcP,UAElD,OAAO1jB,CAAM,GAGrB,SAAS+kB,EAAgBO,GACrB,MAAMnX,EAASnN,EAAM4L,cAKrB,OAJmByX,EAAY9Q,KAAIkR,GAAkB,OAAXtW,EAAkBsW,EAAIW,mBAAmBjX,GAAU,OAExFqD,QAAO6T,GAA2B,OAAdA,IACpB9R,KAAI8R,GAAajkB,EAASkkB,GAAWD,IAE9C,CACA,SAASR,EAAiBS,GACtB,MAAO,KACH,IAAIzW,EACJ,MAAM0W,EAAQR,EAAgBO,GAAW/R,KAAI,CAACsG,EAAM2L,IAA2B,WAAbF,GAA0BE,EAAY,EAClG3L,EAAK4L,oBACL5L,IACN,OAAQ0L,EAAM9hB,QACV,KAAK,EACD,OAA2C,QAAnCoL,EAAKoV,EAAcqB,UAA+B,IAAPzW,EAAgBA,EAAK,GAC5E,KAAK,EACD,OAAO0W,EAAM,GACjB,QAAS,CACL,MAAMG,EAAcH,EAAMP,MAAKW,GAAK,KAAKC,KAAKD,KACxCjY,EAAO6X,EACRM,WAAMvlB,GAAY,GAClBiT,KAAIoS,GAAKA,EAAElQ,QAAQ,KAAM,MACzBiN,KAAK,MACJoD,EAAMP,EAAMM,OAAO,GAAG,GAAGpQ,QAAQ,KAAM,KAAOiQ,EAAc,IAAM,IACxE,OAAO7mB,EAAMI,GAAG,YAAayO,EAAMoY,EACvC,EACJ,CAER,CACJ,C","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/connectionlost.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/frontend.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/shell.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/lab.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/status.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/router.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/tokens.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/treepathupdater.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/application/lib/utils.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\nimport { nullTranslator } from '@jupyterlab/translation';\n/**\n * A default connection lost handler, which brings up an error dialog.\n */\nexport const ConnectionLost = async function (manager, err, translator) {\n    translator = translator || nullTranslator;\n    const trans = translator.load('jupyterlab');\n    const title = trans.__('Server Connection Error');\n    const networkMsg = trans.__('A connection to the Jupyter server could not be established.\\n' +\n        'JupyterLab will continue trying to reconnect.\\n' +\n        'Check your network connection or Jupyter server configuration.\\n');\n    if (!Private.displayConnectionLost) {\n        return;\n    }\n    if (Private.serverConnectionLost) {\n        // Wait for the pre-existing promise to complete\n        await Private.serverConnectionLost;\n        return;\n    }\n    const dialog = showDialog({\n        title: title,\n        body: networkMsg,\n        checkbox: {\n            label: trans.__('Do not show this message again in this session.'),\n            caption: trans.__('If checked, you will not see a dialog informing you about an issue with server connection in this session.')\n        },\n        buttons: [Dialog.cancelButton({ label: trans.__('Close') })]\n    })\n        .then(result => {\n        if (result.isChecked) {\n            Private.displayConnectionLost = false;\n        }\n        return;\n    })\n        .catch(error => {\n        console.error('An error occurred while showing the dialog: ', error);\n    })\n        .finally(() => {\n        Private.serverConnectionLost = undefined;\n    });\n    Private.serverConnectionLost = dialog;\n};\n/**\n * The namespace for module private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Boolean determining if connection lost dialog is displayed.\n     */\n    Private.displayConnectionLost = true;\n})(Private || (Private = {}));\n//# sourceMappingURL=connectionlost.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { CommandLinker } from '@jupyterlab/apputils';\nimport { DocumentRegistry } from '@jupyterlab/docregistry';\nimport { ServiceManager } from '@jupyterlab/services';\nimport { ContextMenuSvg } from '@jupyterlab/ui-components';\nimport { Application } from '@lumino/application';\nimport { Token } from '@lumino/coreutils';\nimport { Signal } from '@lumino/signaling';\n/**\n * The base Jupyter front-end application class.\n *\n * @typeparam `T` - The `shell` type. Defaults to `JupyterFrontEnd.IShell`.\n *\n * @typeparam `U` - The type for supported format names. Defaults to `string`.\n *\n * #### Notes\n * This type is useful as a generic application against which front-end plugins\n * can be authored. It inherits from the Lumino `Application`.\n */\nexport class JupyterFrontEnd extends Application {\n    /**\n     * Construct a new JupyterFrontEnd object.\n     */\n    constructor(options) {\n        super(options);\n        this._formatChanged = new Signal(this);\n        // Class to scope global Jupyter CSS rules\n        options.shell.addClass('jp-ThemedContainer');\n        // render context menu/submenus with inline svg icon tweaks\n        this.contextMenu = new ContextMenuSvg({\n            commands: this.commands,\n            renderer: options.contextMenuRenderer,\n            groupByTarget: false,\n            sortBySelector: false\n        });\n        // The default restored promise if one does not exist in the options.\n        const restored = new Promise(resolve => {\n            requestAnimationFrame(() => {\n                resolve();\n            });\n        });\n        this.commandLinker =\n            options.commandLinker || new CommandLinker({ commands: this.commands });\n        this.docRegistry = options.docRegistry || new DocumentRegistry();\n        this.restored =\n            options.restored ||\n                this.started.then(() => restored).catch(() => restored);\n        this.serviceManager = options.serviceManager || new ServiceManager();\n    }\n    /**\n     * The application form factor, e.g., `desktop` or `mobile`.\n     */\n    get format() {\n        return this._format;\n    }\n    set format(format) {\n        if (this._format !== format) {\n            this._format = format;\n            document.body.dataset['format'] = format;\n            this._formatChanged.emit(format);\n        }\n    }\n    /**\n     * A signal that emits when the application form factor changes.\n     */\n    get formatChanged() {\n        return this._formatChanged;\n    }\n    /**\n     * Walks up the DOM hierarchy of the target of the active `contextmenu`\n     * event, testing each HTMLElement ancestor for a user-supplied function. This can\n     * be used to find an HTMLElement on which to operate, given a context menu click.\n     *\n     * @param fn - a function that takes an `HTMLElement` and returns a\n     *   boolean for whether it is the element the requester is seeking.\n     *\n     * @returns an HTMLElement or undefined, if none is found.\n     */\n    contextMenuHitTest(fn) {\n        if (!this._contextMenuEvent ||\n            !(this._contextMenuEvent.target instanceof Node)) {\n            return undefined;\n        }\n        let node = this._contextMenuEvent.target;\n        do {\n            if (node instanceof HTMLElement && fn(node)) {\n                return node;\n            }\n            node = node.parentNode;\n        } while (node && node.parentNode && node !== node.parentNode);\n        return undefined;\n        // TODO: we should be able to use .composedPath() to simplify this function\n        // down to something like the below, but it seems like composedPath is\n        // sometimes returning an empty list.\n        /*\n        if (this._contextMenuEvent) {\n          this._contextMenuEvent\n            .composedPath()\n            .filter(x => x instanceof HTMLElement)\n            .find(test);\n        }\n        return undefined;\n        */\n    }\n    /**\n     * A method invoked on a document `'contextmenu'` event.\n     */\n    evtContextMenu(event) {\n        this._contextMenuEvent = event;\n        if (event.shiftKey ||\n            Private.suppressContextMenu(event.target)) {\n            return;\n        }\n        const opened = this.contextMenu.open(event);\n        if (opened) {\n            const items = this.contextMenu.menu.items;\n            // If only the context menu information will be shown,\n            // with no real commands, close the context menu and\n            // allow the native one to open.\n            if (items.length === 1 &&\n                items[0].command === JupyterFrontEndContextMenu.contextMenu) {\n                this.contextMenu.menu.close();\n                return;\n            }\n            // Stop propagation and allow the application context menu to show.\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n}\n/**\n * The namespace for `JupyterFrontEnd` class statics.\n */\n(function (JupyterFrontEnd) {\n    /**\n     * Is JupyterLab in document mode?\n     *\n     * @param path - Full URL of JupyterLab\n     * @param paths - The current IPaths object hydrated from PageConfig.\n     */\n    function inDocMode(path, paths) {\n        const docPattern = new RegExp(`^${paths.urls.doc}`);\n        const match = path.match(docPattern);\n        if (match) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    JupyterFrontEnd.inDocMode = inDocMode;\n    /**\n     * The application paths dictionary token.\n     */\n    JupyterFrontEnd.IPaths = new Token('@jupyterlab/application:IPaths', `A service providing information about various\n  URLs and server paths for the current application. Use this service if you want to\n  assemble URLs to use the JupyterLab REST API.`);\n    /**\n     * The application tree resolver token.\n     *\n     * #### Notes\n     * Not all Jupyter front-end applications will have a tree resolver\n     * implemented on the client-side. This token should not be required as a\n     * dependency if it is possible to make it an optional dependency.\n     */\n    JupyterFrontEnd.ITreeResolver = new Token('@jupyterlab/application:ITreeResolver', 'A service to resolve the tree path.');\n})(JupyterFrontEnd || (JupyterFrontEnd = {}));\n/**\n * A namespace for module-private functionality.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Returns whether the element is itself, or a child of, an element with the `jp-suppress-context-menu` data attribute.\n     */\n    function suppressContextMenu(element) {\n        return element.closest('[data-jp-suppress-context-menu]') !== null;\n    }\n    Private.suppressContextMenu = suppressContextMenu;\n})(Private || (Private = {}));\n/**\n * A namespace for the context menu override.\n */\nexport var JupyterFrontEndContextMenu;\n(function (JupyterFrontEndContextMenu) {\n    /**\n     * An id for a private context-menu-info ersatz command.\n     */\n    JupyterFrontEndContextMenu.contextMenu = '__internal:context-menu-info';\n})(JupyterFrontEndContextMenu || (JupyterFrontEndContextMenu = {}));\n//# sourceMappingURL=frontend.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { DocumentWidget } from '@jupyterlab/docregistry';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { classes, DockPanelSvg, LabIcon, TabBarSvg, tabIcon, TabPanelSvg } from '@jupyterlab/ui-components';\nimport { ArrayExt, find, map } from '@lumino/algorithm';\nimport { JSONExt, PromiseDelegate, Token } from '@lumino/coreutils';\nimport { MessageLoop } from '@lumino/messaging';\nimport { Debouncer } from '@lumino/polling';\nimport { Signal } from '@lumino/signaling';\nimport { AccordionPanel, BoxLayout, BoxPanel, FocusTracker, Panel, SplitPanel, StackedPanel, TabBar, Widget } from '@lumino/widgets';\n/**\n * The class name added to AppShell instances.\n */\nconst APPLICATION_SHELL_CLASS = 'jp-LabShell';\n/**\n * The class name added to side bar instances.\n */\nconst SIDEBAR_CLASS = 'jp-SideBar';\n/**\n * The class name added to the current widget's title.\n */\nconst CURRENT_CLASS = 'jp-mod-current';\n/**\n * The class name added to the active widget's title.\n */\nconst ACTIVE_CLASS = 'jp-mod-active';\n/**\n * The default rank of items added to a sidebar.\n */\nconst DEFAULT_RANK = 900;\nconst ACTIVITY_CLASS = 'jp-Activity';\n/**\n * The JupyterLab application shell token.\n */\nexport const ILabShell = new Token('@jupyterlab/application:ILabShell', 'A service for interacting with the JupyterLab shell. The top-level ``application`` object also has a reference to the shell, but it has a restricted interface in order to be agnostic to different shell implementations on the application. Use this to get more detailed information about currently active widgets and layout state.');\n/**\n * The application shell for JupyterLab.\n */\nexport class LabShell extends Widget {\n    /**\n     * Construct a new application shell.\n     */\n    constructor(options) {\n        super();\n        /**\n         * A message hook for child add/remove messages on the main area dock panel.\n         */\n        this._dockChildHook = (handler, msg) => {\n            switch (msg.type) {\n                case 'child-added':\n                    msg.child.addClass(ACTIVITY_CLASS);\n                    this._tracker.add(msg.child);\n                    break;\n                case 'child-removed':\n                    msg.child.removeClass(ACTIVITY_CLASS);\n                    this._tracker.remove(msg.child);\n                    break;\n                default:\n                    break;\n            }\n            return true;\n        };\n        this._activeChanged = new Signal(this);\n        this._cachedLayout = null;\n        this._currentChanged = new Signal(this);\n        this._currentPath = '';\n        this._currentPathChanged = new Signal(this);\n        this._modeChanged = new Signal(this);\n        this._isRestored = false;\n        this._layoutModified = new Signal(this);\n        this._layoutDebouncer = new Debouncer(() => {\n            this._layoutModified.emit(undefined);\n        }, 0);\n        this._restored = new PromiseDelegate();\n        this._tracker = new FocusTracker();\n        this._topHandlerHiddenByUser = false;\n        this._idTypeMap = new Map();\n        this._mainOptionsCache = new Map();\n        this._sideOptionsCache = new Map();\n        this._delayedWidget = new Array();\n        this.addClass(APPLICATION_SHELL_CLASS);\n        this.id = 'main';\n        if ((options === null || options === void 0 ? void 0 : options.waitForRestore) === false) {\n            this._userLayout = { 'multiple-document': {}, 'single-document': {} };\n        }\n        // Skip Links\n        const skipLinkWidget = (this._skipLinkWidget = new Private.SkipLinkWidget(this));\n        this._skipLinkWidget.show();\n        //  Wrap the skip widget to customize its position and size\n        const skipLinkWrapper = new Panel();\n        skipLinkWrapper.addClass('jp-skiplink-wrapper');\n        skipLinkWrapper.addWidget(skipLinkWidget);\n        const headerPanel = (this._headerPanel = new BoxPanel());\n        const menuHandler = (this._menuHandler = new Private.PanelHandler());\n        menuHandler.panel.node.setAttribute('role', 'navigation');\n        const topHandler = (this._topHandler = new Private.PanelHandler());\n        topHandler.panel.node.setAttribute('role', 'banner');\n        const bottomPanel = (this._bottomPanel = new BoxPanel());\n        bottomPanel.node.setAttribute('role', 'contentinfo');\n        const hboxPanel = new BoxPanel();\n        const vsplitPanel = (this._vsplitPanel =\n            new Private.RestorableSplitPanel());\n        const dockPanel = (this._dockPanel = new DockPanelSvg({\n            hiddenMode: Widget.HiddenMode.Display\n        }));\n        MessageLoop.installMessageHook(dockPanel, this._dockChildHook);\n        const hsplitPanel = (this._hsplitPanel =\n            new Private.RestorableSplitPanel());\n        const downPanel = (this._downPanel = new TabPanelSvg({\n            tabsMovable: true\n        }));\n        const leftHandler = (this._leftHandler = new Private.SideBarHandler());\n        const rightHandler = (this._rightHandler = new Private.SideBarHandler());\n        const rootLayout = new BoxLayout();\n        headerPanel.id = 'jp-header-panel';\n        menuHandler.panel.id = 'jp-menu-panel';\n        topHandler.panel.id = 'jp-top-panel';\n        bottomPanel.id = 'jp-bottom-panel';\n        hboxPanel.id = 'jp-main-content-panel';\n        vsplitPanel.id = 'jp-main-vsplit-panel';\n        dockPanel.id = 'jp-main-dock-panel';\n        hsplitPanel.id = 'jp-main-split-panel';\n        downPanel.id = 'jp-down-stack';\n        leftHandler.sideBar.addClass(SIDEBAR_CLASS);\n        leftHandler.sideBar.addClass('jp-mod-left');\n        leftHandler.sideBar.node.setAttribute('role', 'complementary');\n        leftHandler.stackedPanel.id = 'jp-left-stack';\n        rightHandler.sideBar.addClass(SIDEBAR_CLASS);\n        rightHandler.sideBar.addClass('jp-mod-right');\n        rightHandler.sideBar.node.setAttribute('role', 'complementary');\n        rightHandler.stackedPanel.id = 'jp-right-stack';\n        dockPanel.node.setAttribute('role', 'main');\n        hboxPanel.spacing = 0;\n        vsplitPanel.spacing = 1;\n        dockPanel.spacing = 5;\n        hsplitPanel.spacing = 1;\n        headerPanel.direction = 'top-to-bottom';\n        vsplitPanel.orientation = 'vertical';\n        hboxPanel.direction = 'left-to-right';\n        hsplitPanel.orientation = 'horizontal';\n        bottomPanel.direction = 'bottom-to-top';\n        SplitPanel.setStretch(leftHandler.stackedPanel, 0);\n        SplitPanel.setStretch(downPanel, 0);\n        SplitPanel.setStretch(dockPanel, 1);\n        SplitPanel.setStretch(rightHandler.stackedPanel, 0);\n        BoxPanel.setStretch(leftHandler.sideBar, 0);\n        BoxPanel.setStretch(hsplitPanel, 1);\n        BoxPanel.setStretch(rightHandler.sideBar, 0);\n        SplitPanel.setStretch(vsplitPanel, 1);\n        hsplitPanel.addWidget(leftHandler.stackedPanel);\n        hsplitPanel.addWidget(dockPanel);\n        hsplitPanel.addWidget(rightHandler.stackedPanel);\n        vsplitPanel.addWidget(hsplitPanel);\n        vsplitPanel.addWidget(downPanel);\n        hboxPanel.addWidget(leftHandler.sideBar);\n        hboxPanel.addWidget(vsplitPanel);\n        hboxPanel.addWidget(rightHandler.sideBar);\n        rootLayout.direction = 'top-to-bottom';\n        rootLayout.spacing = 0; // TODO make this configurable?\n        // Use relative sizing to set the width of the side panels.\n        // This will still respect the min-size of children widget in the stacked\n        // panel. The default sizes will be overwritten during layout restoration.\n        vsplitPanel.setRelativeSizes([3, 1]);\n        hsplitPanel.setRelativeSizes([1, 2.5, 1]);\n        BoxLayout.setStretch(headerPanel, 0);\n        BoxLayout.setStretch(menuHandler.panel, 0);\n        BoxLayout.setStretch(topHandler.panel, 0);\n        BoxLayout.setStretch(hboxPanel, 1);\n        BoxLayout.setStretch(bottomPanel, 0);\n        rootLayout.addWidget(skipLinkWrapper);\n        rootLayout.addWidget(headerPanel);\n        rootLayout.addWidget(topHandler.panel);\n        rootLayout.addWidget(hboxPanel);\n        rootLayout.addWidget(bottomPanel);\n        // initially hiding header and bottom panel when no elements inside,\n        this._headerPanel.hide();\n        this._bottomPanel.hide();\n        this._downPanel.hide();\n        this.layout = rootLayout;\n        // Connect change listeners.\n        this._tracker.currentChanged.connect(this._onCurrentChanged, this);\n        this._tracker.activeChanged.connect(this._onActiveChanged, this);\n        // Connect main layout change listener.\n        this._dockPanel.layoutModified.connect(this._onLayoutModified, this);\n        // Connect vsplit layout change listener\n        this._vsplitPanel.updated.connect(this._onLayoutModified, this);\n        // Connect down panel change listeners\n        this._downPanel.currentChanged.connect(this._onLayoutModified, this);\n        this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged, this);\n        this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged, this);\n        // Catch current changed events on the side handlers.\n        this._leftHandler.updated.connect(this._onLayoutModified, this);\n        this._rightHandler.updated.connect(this._onLayoutModified, this);\n        // Catch update events on the horizontal split panel\n        this._hsplitPanel.updated.connect(this._onLayoutModified, this);\n        // Setup single-document-mode title bar\n        const titleHandler = (this._titleHandler = new Private.TitleHandler(this));\n        this.add(titleHandler, 'top', { rank: 100 });\n        if (this._dockPanel.mode === 'multiple-document') {\n            this._topHandler.addWidget(this._menuHandler.panel, 100);\n            titleHandler.hide();\n        }\n        else {\n            rootLayout.insertWidget(3, this._menuHandler.panel);\n        }\n        this.translator = nullTranslator;\n        // Wire up signals to update the title panel of the simple interface mode to\n        // follow the title of this.currentWidget\n        this.currentChanged.connect((sender, args) => {\n            let newValue = args.newValue;\n            let oldValue = args.oldValue;\n            // Stop watching the title of the previously current widget\n            if (oldValue) {\n                oldValue.title.changed.disconnect(this._updateTitlePanelTitle, this);\n                if (oldValue instanceof DocumentWidget) {\n                    oldValue.context.pathChanged.disconnect(this._updateCurrentPath, this);\n                }\n            }\n            // Start watching the title of the new current widget\n            if (newValue) {\n                newValue.title.changed.connect(this._updateTitlePanelTitle, this);\n                this._updateTitlePanelTitle();\n                if (newValue instanceof DocumentWidget) {\n                    newValue.context.pathChanged.connect(this._updateCurrentPath, this);\n                }\n            }\n            this._updateCurrentPath();\n        });\n    }\n    /**\n     * A signal emitted when main area's active focus changes.\n     */\n    get activeChanged() {\n        return this._activeChanged;\n    }\n    /**\n     * The active widget in the shell's main area.\n     */\n    get activeWidget() {\n        return this._tracker.activeWidget;\n    }\n    /**\n     * Whether the add buttons for each main area tab bar are enabled.\n     */\n    get addButtonEnabled() {\n        return this._dockPanel.addButtonEnabled;\n    }\n    set addButtonEnabled(value) {\n        this._dockPanel.addButtonEnabled = value;\n    }\n    /**\n     * A signal emitted when the add button on a main area tab bar is clicked.\n     */\n    get addRequested() {\n        return this._dockPanel.addRequested;\n    }\n    /**\n     * A signal emitted when main area's current focus changes.\n     */\n    get currentChanged() {\n        return this._currentChanged;\n    }\n    /**\n     * Current document path.\n     */\n    // FIXME deprecation `undefined` is to ensure backward compatibility in 4.x\n    get currentPath() {\n        return this._currentPath;\n    }\n    /**\n     * A signal emitted when the path of the current document changes.\n     *\n     * This also fires when the current document itself changes.\n     */\n    get currentPathChanged() {\n        return this._currentPathChanged;\n    }\n    /**\n     * The current widget in the shell's main area.\n     */\n    get currentWidget() {\n        return this._tracker.currentWidget;\n    }\n    /**\n     * A signal emitted when the main area's layout is modified.\n     */\n    get layoutModified() {\n        return this._layoutModified;\n    }\n    /**\n     * Whether the left area is collapsed.\n     */\n    get leftCollapsed() {\n        return !this._leftHandler.sideBar.currentTitle;\n    }\n    /**\n     * Whether the left area is collapsed.\n     */\n    get rightCollapsed() {\n        return !this._rightHandler.sideBar.currentTitle;\n    }\n    /**\n     * Whether JupyterLab is in presentation mode with the\n     * `jp-mod-presentationMode` CSS class.\n     */\n    get presentationMode() {\n        return this.hasClass('jp-mod-presentationMode');\n    }\n    set presentationMode(value) {\n        this.toggleClass('jp-mod-presentationMode', value);\n    }\n    /**\n     * The main dock area's user interface mode.\n     */\n    get mode() {\n        return this._dockPanel.mode;\n    }\n    set mode(mode) {\n        const dock = this._dockPanel;\n        if (mode === dock.mode) {\n            return;\n        }\n        const applicationCurrentWidget = this.currentWidget;\n        if (mode === 'single-document') {\n            // Cache the current multi-document layout before changing the mode.\n            this._cachedLayout = dock.saveLayout();\n            dock.mode = mode;\n            // In case the active widget in the dock panel is *not* the active widget\n            // of the application, defer to the application.\n            if (this.currentWidget) {\n                dock.activateWidget(this.currentWidget);\n            }\n            // Adjust menu and title\n            this.layout.insertWidget(3, this._menuHandler.panel);\n            this._titleHandler.show();\n            this._updateTitlePanelTitle();\n            if (this._topHandlerHiddenByUser) {\n                this._topHandler.panel.hide();\n            }\n        }\n        else {\n            // Cache a reference to every widget currently in the dock panel before\n            // changing its mode.\n            const widgets = Array.from(dock.widgets());\n            dock.mode = mode;\n            // Restore cached layout if possible.\n            if (this._cachedLayout) {\n                // Remove any disposed widgets in the cached layout and restore.\n                Private.normalizeAreaConfig(dock, this._cachedLayout.main);\n                dock.restoreLayout(this._cachedLayout);\n                this._cachedLayout = null;\n            }\n            // If layout restoration has been deferred, restore layout now.\n            if (this._layoutRestorer.isDeferred) {\n                this._layoutRestorer\n                    .restoreDeferred()\n                    .then(mainArea => {\n                    if (mainArea) {\n                        const { currentWidget, dock } = mainArea;\n                        if (dock) {\n                            this._dockPanel.restoreLayout(dock);\n                        }\n                        if (currentWidget) {\n                            this.activateById(currentWidget.id);\n                        }\n                    }\n                })\n                    .catch(reason => {\n                    console.error('Failed to restore the deferred layout.');\n                    console.error(reason);\n                });\n            }\n            // Add any widgets created during single document mode, which have\n            // subsequently been removed from the dock panel after the multiple document\n            // layout has been restored. If the widget has add options cached for\n            // the widget (i.e., if it has been placed with respect to another widget),\n            // then take that into account.\n            widgets.forEach(widget => {\n                if (!widget.parent) {\n                    this._addToMainArea(widget, {\n                        ...this._mainOptionsCache.get(widget),\n                        activate: false\n                    });\n                }\n            });\n            this._mainOptionsCache.clear();\n            // In case the active widget in the dock panel is *not* the active widget\n            // of the application, defer to the application.\n            if (applicationCurrentWidget) {\n                dock.activateWidget(applicationCurrentWidget);\n            }\n            // Adjust menu and title\n            this.add(this._menuHandler.panel, 'top', { rank: 100 });\n            this._titleHandler.hide();\n        }\n        // Set the mode data attribute on the applications shell node.\n        this.node.dataset.shellMode = mode;\n        this._downPanel.fit();\n        // Emit the mode changed signal\n        this._modeChanged.emit(mode);\n    }\n    /**\n     * A signal emitted when the shell/dock panel change modes (single/multiple document).\n     */\n    get modeChanged() {\n        return this._modeChanged;\n    }\n    /**\n     * Promise that resolves when state is first restored, returning layout\n     * description.\n     */\n    get restored() {\n        return this._restored.promise;\n    }\n    get translator() {\n        var _a;\n        return (_a = this._translator) !== null && _a !== void 0 ? _a : nullTranslator;\n    }\n    set translator(value) {\n        if (value !== this._translator) {\n            this._translator = value;\n            // Set translator for tab bars\n            TabBarSvg.translator = value;\n            const trans = value.load('jupyterlab');\n            this._menuHandler.panel.node.setAttribute('aria-label', trans.__('main menu'));\n            this._leftHandler.sideBar.node.setAttribute('aria-label', trans.__('main sidebar'));\n            this._leftHandler.sideBar.contentNode.setAttribute('aria-label', trans.__('main sidebar'));\n            this._rightHandler.sideBar.node.setAttribute('aria-label', trans.__('alternate sidebar'));\n            this._rightHandler.sideBar.contentNode.setAttribute('aria-label', trans.__('alternate sidebar'));\n        }\n    }\n    /**\n     * User customized shell layout.\n     */\n    get userLayout() {\n        return JSONExt.deepCopy(this._userLayout);\n    }\n    /**\n     * Activate a widget in its area.\n     */\n    activateById(id) {\n        if (this._leftHandler.has(id)) {\n            this._leftHandler.activate(id);\n            return;\n        }\n        if (this._rightHandler.has(id)) {\n            this._rightHandler.activate(id);\n            return;\n        }\n        const tabIndex = this._downPanel.tabBar.titles.findIndex(title => title.owner.id === id);\n        if (tabIndex >= 0) {\n            this._downPanel.currentIndex = tabIndex;\n            return;\n        }\n        const dock = this._dockPanel;\n        const widget = find(dock.widgets(), value => value.id === id);\n        if (widget) {\n            dock.activateWidget(widget);\n        }\n    }\n    /**\n     * Activate widget in specified area.\n     *\n     * ### Notes\n     * The alpha version of this method only supports activating the \"main\" area.\n     *\n     * @alpha\n     * @param area Name of area to activate\n     */\n    activateArea(area = 'main') {\n        switch (area) {\n            case 'main':\n                {\n                    const current = this._currentTabBar();\n                    if (!current) {\n                        return;\n                    }\n                    if (current.currentTitle) {\n                        current.currentTitle.owner.activate();\n                    }\n                }\n                return;\n            case 'left':\n            case 'right':\n            case 'header':\n            case 'top':\n            case 'menu':\n            case 'bottom':\n                console.debug(`Area: ${area} activation not yet implemented`);\n                break;\n            default:\n                throw new Error(`Invalid area: ${area}`);\n        }\n    }\n    /**\n     * Activate the next Tab in the active TabBar.\n     */\n    activateNextTab() {\n        const current = this._currentTabBar();\n        if (!current) {\n            return;\n        }\n        const ci = current.currentIndex;\n        if (ci === -1) {\n            return;\n        }\n        if (ci < current.titles.length - 1) {\n            current.currentIndex += 1;\n            if (current.currentTitle) {\n                current.currentTitle.owner.activate();\n            }\n            return;\n        }\n        if (ci === current.titles.length - 1) {\n            const nextBar = this._adjacentBar('next');\n            if (nextBar) {\n                nextBar.currentIndex = 0;\n                if (nextBar.currentTitle) {\n                    nextBar.currentTitle.owner.activate();\n                }\n            }\n        }\n    }\n    /**\n     * Activate the previous Tab in the active TabBar.\n     */\n    activatePreviousTab() {\n        const current = this._currentTabBar();\n        if (!current) {\n            return;\n        }\n        const ci = current.currentIndex;\n        if (ci === -1) {\n            return;\n        }\n        if (ci > 0) {\n            current.currentIndex -= 1;\n            if (current.currentTitle) {\n                current.currentTitle.owner.activate();\n            }\n            return;\n        }\n        if (ci === 0) {\n            const prevBar = this._adjacentBar('previous');\n            if (prevBar) {\n                const len = prevBar.titles.length;\n                prevBar.currentIndex = len - 1;\n                if (prevBar.currentTitle) {\n                    prevBar.currentTitle.owner.activate();\n                }\n            }\n        }\n    }\n    /**\n     * Activate the next TabBar.\n     */\n    activateNextTabBar() {\n        const nextBar = this._adjacentBar('next');\n        if (nextBar) {\n            if (nextBar.currentTitle) {\n                nextBar.currentTitle.owner.activate();\n            }\n        }\n    }\n    /**\n     * Activate the next TabBar.\n     */\n    activatePreviousTabBar() {\n        const nextBar = this._adjacentBar('previous');\n        if (nextBar) {\n            if (nextBar.currentTitle) {\n                nextBar.currentTitle.owner.activate();\n            }\n        }\n    }\n    /**\n     * Add a widget to the JupyterLab shell\n     *\n     * @param widget Widget\n     * @param area Area\n     * @param options Options\n     */\n    add(widget, area = 'main', options) {\n        var _a;\n        if (!this._userLayout) {\n            this._delayedWidget.push({ widget, area, options });\n            return;\n        }\n        let userPosition;\n        if ((options === null || options === void 0 ? void 0 : options.type) && this._userLayout[this.mode][options.type]) {\n            userPosition = this._userLayout[this.mode][options.type];\n            this._idTypeMap.set(widget.id, options.type);\n        }\n        else {\n            userPosition = this._userLayout[this.mode][widget.id];\n        }\n        if (options === null || options === void 0 ? void 0 : options.type) {\n            this._idTypeMap.set(widget.id, options.type);\n            widget.disposed.connect(() => {\n                this._idTypeMap.delete(widget.id);\n            });\n        }\n        area = (_a = userPosition === null || userPosition === void 0 ? void 0 : userPosition.area) !== null && _a !== void 0 ? _a : area;\n        options =\n            options || (userPosition === null || userPosition === void 0 ? void 0 : userPosition.options)\n                ? {\n                    ...options,\n                    ...userPosition === null || userPosition === void 0 ? void 0 : userPosition.options\n                }\n                : undefined;\n        switch (area || 'main') {\n            case 'bottom':\n                return this._addToBottomArea(widget, options);\n            case 'down':\n                return this._addToDownArea(widget, options);\n            case 'header':\n                return this._addToHeaderArea(widget, options);\n            case 'left':\n                return this._addToLeftArea(widget, options);\n            case 'main':\n                return this._addToMainArea(widget, options);\n            case 'menu':\n                return this._addToMenuArea(widget, options);\n            case 'right':\n                return this._addToRightArea(widget, options);\n            case 'top':\n                return this._addToTopArea(widget, options);\n            default:\n                throw new Error(`Invalid area: ${area}`);\n        }\n    }\n    /**\n     * Move a widget type to a new area.\n     *\n     * The type is determined from the `widget.id` and fallback to `widget.id`.\n     *\n     * #### Notes\n     * If `mode` is undefined, both mode are updated.\n     * The new layout is now persisted.\n     *\n     * @param widget Widget to move\n     * @param area New area\n     * @param mode Mode to change\n     * @returns The new user layout\n     */\n    move(widget, area, mode) {\n        var _a;\n        const type = (_a = this._idTypeMap.get(widget.id)) !== null && _a !== void 0 ? _a : widget.id;\n        for (const m of ['single-document', 'multiple-document'].filter(c => !mode || c === mode)) {\n            this._userLayout[m][type] = {\n                ...this._userLayout[m][type],\n                area\n            };\n        }\n        this.add(widget, area);\n        return this._userLayout;\n    }\n    /**\n     * Collapse the left area.\n     */\n    collapseLeft() {\n        this._leftHandler.collapse();\n        this._onLayoutModified();\n    }\n    /**\n     * Collapse the right area.\n     */\n    collapseRight() {\n        this._rightHandler.collapse();\n        this._onLayoutModified();\n    }\n    /**\n     * Dispose the shell.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._layoutDebouncer.dispose();\n        super.dispose();\n    }\n    /**\n     * Expand the left area.\n     *\n     * #### Notes\n     * This will open the most recently used tab,\n     * or the first tab if there is no most recently used.\n     */\n    expandLeft() {\n        this._leftHandler.expand();\n        this._onLayoutModified();\n    }\n    /**\n     * Expand the right area.\n     *\n     * #### Notes\n     * This will open the most recently used tab,\n     * or the first tab if there is no most recently used.\n     */\n    expandRight() {\n        this._rightHandler.expand();\n        this._onLayoutModified();\n    }\n    /**\n     * Close all widgets in the main and down area.\n     */\n    closeAll() {\n        // Make a copy of all the widget in the dock panel (using `Array.from()`)\n        // before removing them because removing them while iterating through them\n        // modifies the underlying data of the iterator.\n        Array.from(this._dockPanel.widgets()).forEach(widget => widget.close());\n        this._downPanel.stackedPanel.widgets.forEach(widget => widget.close());\n    }\n    /**\n     * Whether an side tab bar is visible or not.\n     *\n     * @param side Sidebar of interest\n     * @returns Side tab bar visibility\n     */\n    isSideTabBarVisible(side) {\n        switch (side) {\n            case 'left':\n                return this._leftHandler.isVisible;\n            case 'right':\n                return this._rightHandler.isVisible;\n        }\n    }\n    /**\n     * Whether the top bar in simple mode is visible or not.\n     *\n     * @returns Top bar visibility\n     */\n    isTopInSimpleModeVisible() {\n        return !this._topHandlerHiddenByUser;\n    }\n    /**\n     * True if the given area is empty.\n     */\n    isEmpty(area) {\n        switch (area) {\n            case 'bottom':\n                return this._bottomPanel.widgets.length === 0;\n            case 'down':\n                return this._downPanel.stackedPanel.widgets.length === 0;\n            case 'header':\n                return this._headerPanel.widgets.length === 0;\n            case 'left':\n                return this._leftHandler.stackedPanel.widgets.length === 0;\n            case 'main':\n                return this._dockPanel.isEmpty;\n            case 'menu':\n                return this._menuHandler.panel.widgets.length === 0;\n            case 'right':\n                return this._rightHandler.stackedPanel.widgets.length === 0;\n            case 'top':\n                return this._topHandler.panel.widgets.length === 0;\n            default:\n                return true;\n        }\n    }\n    /**\n     * Restore the layout state and configuration for the application shell.\n     *\n     * #### Notes\n     * This should only be called once.\n     */\n    async restoreLayout(mode, layoutRestorer, configuration = {}) {\n        var _a, _b, _c, _d;\n        // Set the configuration and add widgets added before the shell was ready.\n        this._userLayout = {\n            'single-document': (_a = configuration['single-document']) !== null && _a !== void 0 ? _a : {},\n            'multiple-document': (_b = configuration['multiple-document']) !== null && _b !== void 0 ? _b : {}\n        };\n        this._delayedWidget.forEach(({ widget, area, options }) => {\n            this.add(widget, area, options);\n        });\n        this._delayedWidget.length = 0;\n        this._layoutRestorer = layoutRestorer;\n        // Get the layout from the restorer\n        const layout = await layoutRestorer.fetch();\n        // Reset the layout\n        const { mainArea, downArea, leftArea, rightArea, topArea, relativeSizes } = layout;\n        // Rehydrate the main area.\n        if (mainArea) {\n            const { currentWidget, dock } = mainArea;\n            if (dock && mode === 'multiple-document') {\n                this._dockPanel.restoreLayout(dock);\n            }\n            if (mode) {\n                this.mode = mode;\n            }\n            if (currentWidget) {\n                this.activateById(currentWidget.id);\n            }\n        }\n        else {\n            // This is needed when loading in an empty workspace in single doc mode\n            if (mode) {\n                this.mode = mode;\n            }\n        }\n        if ((topArea === null || topArea === void 0 ? void 0 : topArea.simpleVisibility) !== undefined) {\n            this._topHandlerHiddenByUser = !topArea.simpleVisibility;\n            if (this.mode === 'single-document') {\n                this._topHandler.panel.setHidden(this._topHandlerHiddenByUser);\n            }\n        }\n        // Rehydrate the down area\n        if (downArea) {\n            const { currentWidget, widgets, size } = downArea;\n            const widgetIds = (_c = widgets === null || widgets === void 0 ? void 0 : widgets.map(widget => widget.id)) !== null && _c !== void 0 ? _c : [];\n            // Remove absent widgets\n            this._downPanel.tabBar.titles\n                .filter(title => !widgetIds.includes(title.owner.id))\n                .map(title => title.owner.close());\n            // Add new widgets\n            const titleIds = this._downPanel.tabBar.titles.map(title => title.owner.id);\n            widgets === null || widgets === void 0 ? void 0 : widgets.filter(widget => !titleIds.includes(widget.id)).map(widget => this._downPanel.addWidget(widget));\n            // Reorder tabs\n            while (!ArrayExt.shallowEqual(widgetIds, this._downPanel.tabBar.titles.map(title => title.owner.id))) {\n                this._downPanel.tabBar.titles.forEach((title, index) => {\n                    const position = widgetIds.findIndex(id => title.owner.id == id);\n                    if (position >= 0 && position != index) {\n                        this._downPanel.tabBar.insertTab(position, title);\n                    }\n                });\n            }\n            if (currentWidget) {\n                const index = this._downPanel.stackedPanel.widgets.findIndex(widget => widget.id === currentWidget.id);\n                if (index) {\n                    this._downPanel.currentIndex = index;\n                    (_d = this._downPanel.currentWidget) === null || _d === void 0 ? void 0 : _d.activate();\n                }\n            }\n            if (size && size > 0.0) {\n                this._vsplitPanel.setRelativeSizes([1.0 - size, size]);\n            }\n            else {\n                // Close all tabs and hide the panel\n                this._downPanel.stackedPanel.widgets.forEach(widget => widget.close());\n                this._downPanel.hide();\n            }\n        }\n        // Rehydrate the left area.\n        if (leftArea) {\n            this._leftHandler.rehydrate(leftArea);\n        }\n        else {\n            if (mode === 'single-document') {\n                this.collapseLeft();\n            }\n        }\n        // Rehydrate the right area.\n        if (rightArea) {\n            this._rightHandler.rehydrate(rightArea);\n        }\n        else {\n            if (mode === 'single-document') {\n                this.collapseRight();\n            }\n        }\n        // Restore the relative sizes.\n        if (relativeSizes) {\n            this._hsplitPanel.setRelativeSizes(relativeSizes);\n        }\n        if (!this._isRestored) {\n            // Make sure all messages in the queue are finished before notifying\n            // any extensions that are waiting for the promise that guarantees the\n            // application state has been restored.\n            MessageLoop.flush();\n            this._restored.resolve(layout);\n        }\n    }\n    /**\n     * Save the dehydrated state of the application shell.\n     */\n    saveLayout() {\n        // If the application is in single document mode, use the cached layout if\n        // available. Otherwise, default to querying the dock panel for layout.\n        const layout = {\n            mainArea: {\n                currentWidget: this._tracker.currentWidget,\n                dock: this.mode === 'single-document'\n                    ? this._cachedLayout || this._dockPanel.saveLayout()\n                    : this._dockPanel.saveLayout()\n            },\n            downArea: {\n                currentWidget: this._downPanel.currentWidget,\n                widgets: Array.from(this._downPanel.stackedPanel.widgets),\n                size: this._vsplitPanel.relativeSizes()[1]\n            },\n            leftArea: this._leftHandler.dehydrate(),\n            rightArea: this._rightHandler.dehydrate(),\n            topArea: { simpleVisibility: !this._topHandlerHiddenByUser },\n            relativeSizes: this._hsplitPanel.relativeSizes()\n        };\n        return layout;\n    }\n    /**\n     * Toggle top header visibility in simple mode\n     *\n     * Note: Does nothing in multi-document mode\n     */\n    toggleTopInSimpleModeVisibility() {\n        if (this.mode === 'single-document') {\n            if (this._topHandler.panel.isVisible) {\n                this._topHandlerHiddenByUser = true;\n                this._topHandler.panel.hide();\n            }\n            else {\n                this._topHandlerHiddenByUser = false;\n                this._topHandler.panel.show();\n                this._updateTitlePanelTitle();\n            }\n            this._onLayoutModified();\n        }\n    }\n    /**\n     * Toggle side tab bar visibility\n     *\n     * @param side Sidebar of interest\n     */\n    toggleSideTabBarVisibility(side) {\n        if (side === 'right') {\n            if (this._rightHandler.isVisible) {\n                this._rightHandler.hide();\n            }\n            else {\n                this._rightHandler.show();\n            }\n        }\n        else {\n            if (this._leftHandler.isVisible) {\n                this._leftHandler.hide();\n            }\n            else {\n                this._leftHandler.show();\n            }\n        }\n    }\n    /**\n     * Update the shell configuration.\n     *\n     * @param config Shell configuration\n     */\n    updateConfig(config) {\n        if (config.hiddenMode) {\n            switch (config.hiddenMode) {\n                case 'display':\n                    this._dockPanel.hiddenMode = Widget.HiddenMode.Display;\n                    break;\n                case 'scale':\n                    this._dockPanel.hiddenMode = Widget.HiddenMode.Scale;\n                    break;\n                case 'contentVisibility':\n                    this._dockPanel.hiddenMode = Widget.HiddenMode.ContentVisibility;\n                    break;\n            }\n        }\n    }\n    /**\n     * Returns the widgets for an application area.\n     */\n    widgets(area) {\n        switch (area !== null && area !== void 0 ? area : 'main') {\n            case 'main':\n                return this._dockPanel.widgets();\n            case 'left':\n                return map(this._leftHandler.sideBar.titles, t => t.owner);\n            case 'right':\n                return map(this._rightHandler.sideBar.titles, t => t.owner);\n            case 'header':\n                return this._headerPanel.children();\n            case 'top':\n                return this._topHandler.panel.children();\n            case 'menu':\n                return this._menuHandler.panel.children();\n            case 'bottom':\n                return this._bottomPanel.children();\n            default:\n                throw new Error(`Invalid area: ${area}`);\n        }\n    }\n    /**\n     * Handle `after-attach` messages for the application shell.\n     */\n    onAfterAttach(msg) {\n        this.node.dataset.shellMode = this.mode;\n    }\n    /**\n     * Update the title panel title based on the title of the current widget.\n     */\n    _updateTitlePanelTitle() {\n        let current = this.currentWidget;\n        const inputElement = this._titleHandler.inputElement;\n        inputElement.value = current ? current.title.label : '';\n        inputElement.title = current ? current.title.caption : '';\n    }\n    /**\n     * The path of the current widget changed, fire the _currentPathChanged signal.\n     */\n    _updateCurrentPath() {\n        let current = this.currentWidget;\n        let newValue = '';\n        if (current && current instanceof DocumentWidget) {\n            newValue = current.context.path;\n        }\n        this._currentPathChanged.emit({\n            newValue: newValue,\n            oldValue: this._currentPath\n        });\n        this._currentPath = newValue;\n    }\n    /**\n     * Add a widget to the left content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToLeftArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || this._sideOptionsCache.get(widget) || {};\n        this._sideOptionsCache.set(widget, options);\n        const rank = 'rank' in options ? options.rank : DEFAULT_RANK;\n        this._leftHandler.addWidget(widget, rank);\n        this._onLayoutModified();\n    }\n    /**\n     * Add a widget to the main content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     * All widgets added to the main area should be disposed after removal\n     * (disposal before removal will remove the widget automatically).\n     *\n     * In the options, `ref` defaults to `null`, `mode` defaults to `'tab-after'`,\n     * and `activate` defaults to `true`.\n     */\n    _addToMainArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || {};\n        const dock = this._dockPanel;\n        const mode = options.mode || 'tab-after';\n        let ref = this.currentWidget;\n        if (options.ref) {\n            ref = find(dock.widgets(), value => value.id === options.ref) || null;\n        }\n        const { title } = widget;\n        // Add widget ID to tab so that we can get a handle on the tab's widget\n        // (for context menu support)\n        title.dataset = { ...title.dataset, id: widget.id };\n        if (title.icon instanceof LabIcon) {\n            // bind an appropriate style to the icon\n            title.icon = title.icon.bindprops({\n                stylesheet: 'mainAreaTab'\n            });\n        }\n        else if (typeof title.icon === 'string' || !title.icon) {\n            // add some classes to help with displaying css background imgs\n            title.iconClass = classes(title.iconClass, 'jp-Icon');\n        }\n        dock.addWidget(widget, { mode, ref });\n        // The dock panel doesn't account for placement information while\n        // in single document mode, so upon rehydrating any widgets that were\n        // added will not be in the correct place. Cache the placement information\n        // here so that we can later rehydrate correctly.\n        if (dock.mode === 'single-document') {\n            this._mainOptionsCache.set(widget, options);\n        }\n        if (options.activate !== false) {\n            dock.activateWidget(widget);\n        }\n    }\n    /**\n     * Add a widget to the right content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToRightArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || this._sideOptionsCache.get(widget) || {};\n        const rank = 'rank' in options ? options.rank : DEFAULT_RANK;\n        this._sideOptionsCache.set(widget, options);\n        this._rightHandler.addWidget(widget, rank);\n        this._onLayoutModified();\n    }\n    /**\n     * Add a widget to the top content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToTopArea(widget, options) {\n        var _a;\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || {};\n        const rank = (_a = options.rank) !== null && _a !== void 0 ? _a : DEFAULT_RANK;\n        this._topHandler.addWidget(widget, rank);\n        this._onLayoutModified();\n        if (this._topHandler.panel.isHidden) {\n            this._topHandler.panel.show();\n        }\n    }\n    /**\n     * Add a widget to the title content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToMenuArea(widget, options) {\n        var _a;\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || {};\n        const rank = (_a = options.rank) !== null && _a !== void 0 ? _a : DEFAULT_RANK;\n        this._menuHandler.addWidget(widget, rank);\n        this._onLayoutModified();\n        if (this._menuHandler.panel.isHidden) {\n            this._menuHandler.panel.show();\n        }\n    }\n    /**\n     * Add a widget to the header content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToHeaderArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        // Temporary: widgets are added to the panel in order of insertion.\n        this._headerPanel.addWidget(widget);\n        this._onLayoutModified();\n        if (this._headerPanel.isHidden) {\n            this._headerPanel.show();\n        }\n    }\n    /**\n     * Add a widget to the bottom content area.\n     *\n     * #### Notes\n     * Widgets must have a unique `id` property, which will be used as the DOM id.\n     */\n    _addToBottomArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        // Temporary: widgets are added to the panel in order of insertion.\n        this._bottomPanel.addWidget(widget);\n        this._onLayoutModified();\n        if (this._bottomPanel.isHidden) {\n            this._bottomPanel.show();\n        }\n    }\n    _addToDownArea(widget, options) {\n        if (!widget.id) {\n            console.error('Widgets added to app shell must have unique id property.');\n            return;\n        }\n        options = options || {};\n        const { title } = widget;\n        // Add widget ID to tab so that we can get a handle on the tab's widget\n        // (for context menu support)\n        title.dataset = { ...title.dataset, id: widget.id };\n        if (title.icon instanceof LabIcon) {\n            // bind an appropriate style to the icon\n            title.icon = title.icon.bindprops({\n                stylesheet: 'mainAreaTab'\n            });\n        }\n        else if (typeof title.icon === 'string' || !title.icon) {\n            // add some classes to help with displaying css background imgs\n            title.iconClass = classes(title.iconClass, 'jp-Icon');\n        }\n        this._downPanel.addWidget(widget);\n        this._onLayoutModified();\n        if (this._downPanel.isHidden) {\n            this._downPanel.show();\n        }\n    }\n    /*\n     * Return the tab bar adjacent to the current TabBar or `null`.\n     */\n    _adjacentBar(direction) {\n        const current = this._currentTabBar();\n        if (!current) {\n            return null;\n        }\n        const bars = Array.from(this._dockPanel.tabBars());\n        const len = bars.length;\n        const index = bars.indexOf(current);\n        if (direction === 'previous') {\n            return index > 0 ? bars[index - 1] : index === 0 ? bars[len - 1] : null;\n        }\n        // Otherwise, direction is 'next'.\n        return index < len - 1\n            ? bars[index + 1]\n            : index === len - 1\n                ? bars[0]\n                : null;\n    }\n    /*\n     * Return the TabBar that has the currently active Widget or null.\n     */\n    _currentTabBar() {\n        const current = this._tracker.currentWidget;\n        if (!current) {\n            return null;\n        }\n        const title = current.title;\n        const bars = this._dockPanel.tabBars();\n        return find(bars, bar => bar.titles.indexOf(title) > -1) || null;\n    }\n    /**\n     * Handle a change to the dock area active widget.\n     */\n    _onActiveChanged(sender, args) {\n        if (args.newValue) {\n            args.newValue.title.className += ` ${ACTIVE_CLASS}`;\n        }\n        if (args.oldValue) {\n            args.oldValue.title.className = args.oldValue.title.className.replace(ACTIVE_CLASS, '');\n        }\n        this._activeChanged.emit(args);\n    }\n    /**\n     * Handle a change to the dock area current widget.\n     */\n    _onCurrentChanged(sender, args) {\n        if (args.newValue) {\n            args.newValue.title.className += ` ${CURRENT_CLASS}`;\n        }\n        if (args.oldValue) {\n            args.oldValue.title.className = args.oldValue.title.className.replace(CURRENT_CLASS, '');\n        }\n        this._currentChanged.emit(args);\n        this._onLayoutModified();\n    }\n    /**\n     * Handle a change on the down panel widgets\n     */\n    _onTabPanelChanged() {\n        if (this._downPanel.stackedPanel.widgets.length === 0) {\n            this._downPanel.hide();\n        }\n        this._onLayoutModified();\n    }\n    /**\n     * Handle a change to the layout.\n     */\n    _onLayoutModified() {\n        void this._layoutDebouncer.invoke();\n    }\n}\nvar Private;\n(function (Private) {\n    /**\n     * A less-than comparison function for side bar rank items.\n     */\n    function itemCmp(first, second) {\n        return first.rank - second.rank;\n    }\n    Private.itemCmp = itemCmp;\n    /**\n     * Removes widgets that have been disposed from an area config, mutates area.\n     */\n    function normalizeAreaConfig(parent, area) {\n        if (!area) {\n            return;\n        }\n        if (area.type === 'tab-area') {\n            area.widgets = area.widgets.filter(widget => !widget.isDisposed && widget.parent === parent);\n            return;\n        }\n        area.children.forEach(child => {\n            normalizeAreaConfig(parent, child);\n        });\n    }\n    Private.normalizeAreaConfig = normalizeAreaConfig;\n    /**\n     * A class which manages a panel and sorts its widgets by rank.\n     */\n    class PanelHandler {\n        constructor() {\n            /**\n             * A message hook for child add/remove messages on the main area dock panel.\n             */\n            this._panelChildHook = (handler, msg) => {\n                switch (msg.type) {\n                    case 'child-added':\n                        {\n                            const widget = msg.child;\n                            // If we already know about this widget, we're done\n                            if (this._items.find(v => v.widget === widget)) {\n                                break;\n                            }\n                            // Otherwise, add to the end by default\n                            const rank = this._items[this._items.length - 1].rank;\n                            this._items.push({ widget, rank });\n                        }\n                        break;\n                    case 'child-removed':\n                        {\n                            const widget = msg.child;\n                            ArrayExt.removeFirstWhere(this._items, v => v.widget === widget);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                return true;\n            };\n            this._items = new Array();\n            this._panel = new Panel();\n            MessageLoop.installMessageHook(this._panel, this._panelChildHook);\n        }\n        /**\n         * Get the panel managed by the handler.\n         */\n        get panel() {\n            return this._panel;\n        }\n        /**\n         * Add a widget to the panel.\n         *\n         * If the widget is already added, it will be moved.\n         */\n        addWidget(widget, rank) {\n            widget.parent = null;\n            const item = { widget, rank };\n            const index = ArrayExt.upperBound(this._items, item, Private.itemCmp);\n            ArrayExt.insert(this._items, index, item);\n            this._panel.insertWidget(index, widget);\n        }\n    }\n    Private.PanelHandler = PanelHandler;\n    /**\n     * A class which manages a side bar and related stacked panel.\n     */\n    class SideBarHandler {\n        /**\n         * Construct a new side bar handler.\n         */\n        constructor() {\n            this._isHiddenByUser = false;\n            this._items = new Array();\n            this._updated = new Signal(this);\n            this._sideBar = new TabBar({\n                insertBehavior: 'none',\n                removeBehavior: 'none',\n                allowDeselect: true,\n                orientation: 'vertical'\n            });\n            this._stackedPanel = new StackedPanel();\n            this._sideBar.hide();\n            this._stackedPanel.hide();\n            this._lastCurrent = null;\n            this._sideBar.currentChanged.connect(this._onCurrentChanged, this);\n            this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested, this);\n            this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved, this);\n        }\n        /**\n         * Whether the side bar is visible\n         */\n        get isVisible() {\n            return this._sideBar.isVisible;\n        }\n        /**\n         * Get the tab bar managed by the handler.\n         */\n        get sideBar() {\n            return this._sideBar;\n        }\n        /**\n         * Get the stacked panel managed by the handler\n         */\n        get stackedPanel() {\n            return this._stackedPanel;\n        }\n        /**\n         * Signal fires when the stack panel or the sidebar changes\n         */\n        get updated() {\n            return this._updated;\n        }\n        /**\n         * Handles a movement to the handles of a widget\n         */\n        _onHandleMoved() {\n            return this._refreshVisibility();\n        }\n        /**\n         * Handles changes to the expansion status of a widget\n         */\n        _onExpansionToggle(sender, index) {\n            return this._refreshVisibility();\n        }\n        /**\n         * Expand the sidebar.\n         *\n         * #### Notes\n         * This will open the most recently used tab, or the first tab\n         * if there is no most recently used.\n         */\n        expand() {\n            const previous = this._lastCurrent || (this._items.length > 0 && this._items[0].widget);\n            if (previous) {\n                this.activate(previous.id);\n            }\n        }\n        /**\n         * Activate a widget residing in the side bar by ID.\n         *\n         * @param id - The widget's unique ID.\n         */\n        activate(id) {\n            const widget = this._findWidgetByID(id);\n            if (widget) {\n                this._sideBar.currentTitle = widget.title;\n                widget.activate();\n            }\n        }\n        /**\n         * Test whether the sidebar has the given widget by id.\n         */\n        has(id) {\n            return this._findWidgetByID(id) !== null;\n        }\n        /**\n         * Collapse the sidebar so no items are expanded.\n         */\n        collapse() {\n            this._sideBar.currentTitle = null;\n        }\n        /**\n         * Add a widget and its title to the stacked panel and side bar.\n         *\n         * If the widget is already added, it will be moved.\n         */\n        addWidget(widget, rank) {\n            var _a, _b, _c, _d;\n            widget.parent = null;\n            widget.hide();\n            const item = { widget, rank };\n            const index = this._findInsertIndex(item);\n            ArrayExt.insert(this._items, index, item);\n            this._stackedPanel.insertWidget(index, widget);\n            const title = this._sideBar.insertTab(index, widget.title);\n            // Store the parent id in the title dataset\n            // in order to dispatch click events to the right widget.\n            title.dataset = { id: widget.id };\n            if (title.icon instanceof LabIcon) {\n                // bind an appropriate style to the icon\n                title.icon = title.icon.bindprops({\n                    stylesheet: 'sideBar'\n                });\n            }\n            else if (typeof title.icon === 'string' && title.icon != '') {\n                // add some classes to help with displaying css background imgs\n                title.iconClass = classes(title.iconClass, 'jp-Icon', 'jp-Icon-20');\n            }\n            else if (!title.icon && !title.label) {\n                // add a fallback icon if there is no title label nor icon\n                title.icon = tabIcon.bindprops({\n                    stylesheet: 'sideBar'\n                });\n            }\n            // @ts-expect-error sometimes widget is an Accordion Panel\n            (_b = (_a = widget.content) === null || _a === void 0 ? void 0 : _a.expansionToggled) === null || _b === void 0 ? void 0 : _b.connect(this._onExpansionToggle, this);\n            // @ts-expect-error sometimes widget is a SidePanel\n            (_d = (_c = widget.content) === null || _c === void 0 ? void 0 : _c.handleMoved) === null || _d === void 0 ? void 0 : _d.connect(this._onHandleMoved, this);\n            this._refreshVisibility();\n        }\n        /**\n         * Dehydrate the side bar data.\n         */\n        dehydrate() {\n            const collapsed = this._sideBar.currentTitle === null;\n            const widgets = Array.from(this._stackedPanel.widgets);\n            const currentWidget = widgets[this._sideBar.currentIndex];\n            const widgetStates = {};\n            this._stackedPanel.widgets.forEach((w) => {\n                if (w.id && w.content instanceof SplitPanel) {\n                    widgetStates[w.id] = {\n                        sizes: w.content.relativeSizes(),\n                        expansionStates: w.content.widgets.map(wi => wi.isVisible)\n                    };\n                }\n            });\n            return {\n                collapsed,\n                currentWidget,\n                visible: !this._isHiddenByUser,\n                widgets,\n                widgetStates\n            };\n        }\n        /**\n         * Rehydrate the side bar.\n         */\n        rehydrate(data) {\n            if (data.currentWidget) {\n                this.activate(data.currentWidget.id);\n            }\n            if (data.collapsed) {\n                this.collapse();\n            }\n            if (!data.visible) {\n                this.hide();\n            }\n            if (data.widgetStates) {\n                this._stackedPanel.widgets.forEach((w) => {\n                    var _a;\n                    if (w.id && w.content instanceof SplitPanel) {\n                        const state = (_a = data.widgetStates[w.id]) !== null && _a !== void 0 ? _a : {};\n                        w.content.widgets.forEach((wi, widx) => {\n                            var _a;\n                            const expansion = ((_a = state.expansionStates) !== null && _a !== void 0 ? _a : [])[widx];\n                            if (typeof expansion === 'boolean' &&\n                                w.content instanceof AccordionPanel) {\n                                expansion ? w.content.expand(widx) : w.content.collapse(widx);\n                            }\n                        });\n                        if (state.sizes) {\n                            w.content.setRelativeSizes(state.sizes);\n                        }\n                    }\n                });\n            }\n        }\n        /**\n         * Hide the side bar even if it contains widgets\n         */\n        hide() {\n            this._isHiddenByUser = true;\n            this._refreshVisibility();\n        }\n        /**\n         * Show the side bar if it contains widgets\n         */\n        show() {\n            this._isHiddenByUser = false;\n            this._refreshVisibility();\n        }\n        /**\n         * Find the insertion index for a rank item.\n         */\n        _findInsertIndex(item) {\n            return ArrayExt.upperBound(this._items, item, Private.itemCmp);\n        }\n        /**\n         * Find the index of the item with the given widget, or `-1`.\n         */\n        _findWidgetIndex(widget) {\n            return ArrayExt.findFirstIndex(this._items, i => i.widget === widget);\n        }\n        /**\n         * Find the widget which owns the given title, or `null`.\n         */\n        _findWidgetByTitle(title) {\n            const item = find(this._items, value => value.widget.title === title);\n            return item ? item.widget : null;\n        }\n        /**\n         * Find the widget with the given id, or `null`.\n         */\n        _findWidgetByID(id) {\n            const item = find(this._items, value => value.widget.id === id);\n            return item ? item.widget : null;\n        }\n        /**\n         * Refresh the visibility of the side bar and stacked panel.\n         */\n        _refreshVisibility() {\n            this._stackedPanel.setHidden(this._sideBar.currentTitle === null);\n            this._sideBar.setHidden(this._isHiddenByUser || this._sideBar.titles.length === 0);\n            this._updated.emit();\n        }\n        /**\n         * Handle the `currentChanged` signal from the sidebar.\n         */\n        _onCurrentChanged(sender, args) {\n            const oldWidget = args.previousTitle\n                ? this._findWidgetByTitle(args.previousTitle)\n                : null;\n            const newWidget = args.currentTitle\n                ? this._findWidgetByTitle(args.currentTitle)\n                : null;\n            if (oldWidget) {\n                oldWidget.hide();\n            }\n            if (newWidget) {\n                newWidget.show();\n            }\n            this._lastCurrent = newWidget || oldWidget;\n            this._refreshVisibility();\n        }\n        /**\n         * Handle a `tabActivateRequest` signal from the sidebar.\n         */\n        _onTabActivateRequested(sender, args) {\n            args.title.owner.activate();\n        }\n        /*\n         * Handle the `widgetRemoved` signal from the stacked panel.\n         */\n        _onWidgetRemoved(sender, widget) {\n            if (widget === this._lastCurrent) {\n                this._lastCurrent = null;\n            }\n            ArrayExt.removeAt(this._items, this._findWidgetIndex(widget));\n            this._sideBar.removeTab(widget.title);\n            this._refreshVisibility();\n        }\n    }\n    Private.SideBarHandler = SideBarHandler;\n    class SkipLinkWidget extends Widget {\n        /**\n         * Construct a new skipLink widget.\n         */\n        constructor(shell) {\n            super();\n            this.addClass('jp-skiplink');\n            this.id = 'jp-skiplink';\n            this._shell = shell;\n            this._createSkipLink('Skip to main panel', 'main');\n        }\n        handleEvent(event) {\n            var _a, _b;\n            switch (event.type) {\n                case 'click':\n                    if (event.target instanceof HTMLElement) {\n                        this._shell.activateArea((_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.dataset) === null || _b === void 0 ? void 0 : _b.targetarea);\n                    }\n                    break;\n            }\n        }\n        /**\n         * Handle `after-attach` messages for the widget.\n         */\n        onAfterAttach(msg) {\n            super.onAfterAttach(msg);\n            this.node.addEventListener('click', this);\n        }\n        /**\n         * A message handler invoked on a `'before-detach'`\n         * message\n         */\n        onBeforeDetach(msg) {\n            this.node.removeEventListener('click', this);\n            super.onBeforeDetach(msg);\n        }\n        _createSkipLink(skipLinkText, area) {\n            const skipLink = document.createElement('a');\n            skipLink.href = '#';\n            skipLink.tabIndex = 0;\n            skipLink.text = skipLinkText;\n            skipLink.className = 'skip-link';\n            skipLink.dataset['targetarea'] = area;\n            this.node.appendChild(skipLink);\n        }\n    }\n    Private.SkipLinkWidget = SkipLinkWidget;\n    class TitleHandler extends Widget {\n        /**\n         * Construct a new title handler.\n         */\n        constructor(shell) {\n            super();\n            this._selected = false;\n            const inputElement = document.createElement('input');\n            inputElement.type = 'text';\n            this.node.appendChild(inputElement);\n            this._shell = shell;\n            this.id = 'jp-title-panel-title';\n        }\n        /**\n         * Handle `after-attach` messages for the widget.\n         */\n        onAfterAttach(msg) {\n            super.onAfterAttach(msg);\n            this.inputElement.addEventListener('keyup', this);\n            this.inputElement.addEventListener('click', this);\n            this.inputElement.addEventListener('blur', this);\n        }\n        /**\n         * Handle `before-detach` messages for the widget.\n         */\n        onBeforeDetach(msg) {\n            super.onBeforeDetach(msg);\n            this.inputElement.removeEventListener('keyup', this);\n            this.inputElement.removeEventListener('click', this);\n            this.inputElement.removeEventListener('blur', this);\n        }\n        handleEvent(event) {\n            switch (event.type) {\n                case 'keyup':\n                    void this._evtKeyUp(event);\n                    break;\n                case 'click':\n                    this._evtClick(event);\n                    break;\n                case 'blur':\n                    this._selected = false;\n                    break;\n            }\n        }\n        /**\n         * Handle `keyup` events on the handler.\n         */\n        async _evtKeyUp(event) {\n            if (event.key == 'Enter') {\n                const widget = this._shell.currentWidget;\n                if (widget == null) {\n                    return;\n                }\n                const oldName = widget.title.label;\n                const inputElement = this.inputElement;\n                const newName = inputElement.value;\n                inputElement.blur();\n                if (newName !== oldName) {\n                    widget.title.label = newName;\n                }\n                else {\n                    inputElement.value = oldName;\n                }\n            }\n        }\n        /**\n         * Handle `click` events on the handler.\n         */\n        _evtClick(event) {\n            // only handle primary button clicks\n            if (event.button !== 0 || this._selected) {\n                return;\n            }\n            const inputElement = this.inputElement;\n            event.preventDefault();\n            event.stopPropagation();\n            this._selected = true;\n            const selectEnd = inputElement.value.indexOf('.');\n            if (selectEnd === -1) {\n                inputElement.select();\n            }\n            else {\n                inputElement.setSelectionRange(0, selectEnd);\n            }\n        }\n        /**\n         * The input element containing the parent widget's title.\n         */\n        get inputElement() {\n            return this.node.children[0];\n        }\n    }\n    Private.TitleHandler = TitleHandler;\n    class RestorableSplitPanel extends SplitPanel {\n        constructor(options = {}) {\n            super(options);\n            this.updated = new Signal(this);\n        }\n        /**\n         * Emit 'updated' signal on 'update' requests.\n         */\n        onUpdateRequest(msg) {\n            super.onUpdateRequest(msg);\n            this.updated.emit();\n        }\n    }\n    Private.RestorableSplitPanel = RestorableSplitPanel;\n})(Private || (Private = {}));\n//# sourceMappingURL=shell.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { PageConfig } from '@jupyterlab/coreutils';\nimport { Base64ModelFactory } from '@jupyterlab/docregistry';\nimport { ServiceManager } from '@jupyterlab/services';\nimport { PromiseDelegate, Token } from '@lumino/coreutils';\nimport { JupyterFrontEnd } from './frontend';\nimport { createRendermimePlugins } from './mimerenderers';\nimport { LabShell } from './shell';\nimport { LabStatus } from './status';\n/**\n * JupyterLab is the main application class. It is instantiated once and shared.\n */\nexport class JupyterLab extends JupyterFrontEnd {\n    /**\n     * Construct a new JupyterLab object.\n     */\n    constructor(options = { shell: new LabShell() }) {\n        super({\n            ...options,\n            shell: options.shell || new LabShell(),\n            serviceManager: options.serviceManager ||\n                new ServiceManager({\n                    standby: () => {\n                        return !this._info.isConnected || 'when-hidden';\n                    }\n                })\n        });\n        /**\n         * The name of the JupyterLab application.\n         */\n        this.name = PageConfig.getOption('appName') || 'JupyterLab';\n        /**\n         * A namespace/prefix plugins may use to denote their provenance.\n         */\n        this.namespace = PageConfig.getOption('appNamespace') || this.name;\n        /**\n         * A list of all errors encountered when registering plugins.\n         */\n        this.registerPluginErrors = [];\n        /**\n         * The application busy and dirty status signals and flags.\n         */\n        this.status = new LabStatus(this);\n        /**\n         * The version of the JupyterLab application.\n         */\n        this.version = PageConfig.getOption('appVersion') || 'unknown';\n        this._info = JupyterLab.defaultInfo;\n        this._allPluginsActivated = new PromiseDelegate();\n        // Create an IInfo dictionary from the options to override the defaults.\n        const info = Object.keys(JupyterLab.defaultInfo).reduce((acc, val) => {\n            if (val in options) {\n                acc[val] = JSON.parse(JSON.stringify(options[val]));\n            }\n            return acc;\n        }, {});\n        // Populate application info.\n        this._info = { ...JupyterLab.defaultInfo, ...info };\n        this.restored = this.shell.restored\n            .then(async () => {\n            const activated = [];\n            const deferred = this.activateDeferredPlugins().catch(error => {\n                console.error('Error when activating deferred plugins\\n:', error);\n            });\n            activated.push(deferred);\n            if (this._info.deferred) {\n                const customizedDeferred = Promise.all(this._info.deferred.matches.map(pluginID => this.activatePlugin(pluginID))).catch(error => {\n                    console.error('Error when activating customized list of deferred plugins:\\n', error);\n                });\n                activated.push(customizedDeferred);\n            }\n            Promise.all(activated)\n                .then(() => {\n                this._allPluginsActivated.resolve();\n            })\n                .catch(() => undefined);\n        })\n            .catch(() => undefined);\n        // Populate application paths override the defaults if necessary.\n        const defaultURLs = JupyterLab.defaultPaths.urls;\n        const defaultDirs = JupyterLab.defaultPaths.directories;\n        const optionURLs = (options.paths && options.paths.urls) || {};\n        const optionDirs = (options.paths && options.paths.directories) || {};\n        this._paths = {\n            urls: Object.keys(defaultURLs).reduce((acc, key) => {\n                if (key in optionURLs) {\n                    const value = optionURLs[key];\n                    acc[key] = value;\n                }\n                else {\n                    acc[key] = defaultURLs[key];\n                }\n                return acc;\n            }, {}),\n            directories: Object.keys(JupyterLab.defaultPaths.directories).reduce((acc, key) => {\n                if (key in optionDirs) {\n                    const value = optionDirs[key];\n                    acc[key] = value;\n                }\n                else {\n                    acc[key] = defaultDirs[key];\n                }\n                return acc;\n            }, {})\n        };\n        if (this._info.devMode) {\n            this.shell.addClass('jp-mod-devMode');\n        }\n        // Add initial model factory.\n        this.docRegistry.addModelFactory(new Base64ModelFactory());\n        if (options.mimeExtensions) {\n            for (const plugin of createRendermimePlugins(options.mimeExtensions)) {\n                this.registerPlugin(plugin);\n            }\n        }\n    }\n    /**\n     * The JupyterLab application information dictionary.\n     */\n    get info() {\n        return this._info;\n    }\n    /**\n     * The JupyterLab application paths dictionary.\n     */\n    get paths() {\n        return this._paths;\n    }\n    /**\n     * Promise that resolves when all the plugins are activated, including the deferred.\n     */\n    get allPluginsActivated() {\n        return this._allPluginsActivated.promise;\n    }\n    /**\n     * Register plugins from a plugin module.\n     *\n     * @param mod - The plugin module to register.\n     */\n    registerPluginModule(mod) {\n        let data = mod.default;\n        // Handle commonjs exports.\n        if (!mod.hasOwnProperty('__esModule')) {\n            data = mod;\n        }\n        if (!Array.isArray(data)) {\n            data = [data];\n        }\n        data.forEach(item => {\n            try {\n                this.registerPlugin(item);\n            }\n            catch (error) {\n                this.registerPluginErrors.push(error);\n            }\n        });\n    }\n    /**\n     * Register the plugins from multiple plugin modules.\n     *\n     * @param mods - The plugin modules to register.\n     */\n    registerPluginModules(mods) {\n        mods.forEach(mod => {\n            this.registerPluginModule(mod);\n        });\n    }\n    /**\n     * Override keydown handling to prevent command shortcuts from preventing user input.\n     *\n     * This introduces a slight delay to the command invocation, but no delay to user input.\n     */\n    evtKeydown(keyDownEvent) {\n        const permissionToExecute = new PromiseDelegate();\n        // Hold the execution of any keybinding until we know if this event would cause text insertion\n        this.commands.holdKeyBindingExecution(keyDownEvent, permissionToExecute.promise);\n        // Process the key immediately to invoke the prevent default handlers as needed\n        this.commands.processKeydownEvent(keyDownEvent);\n        // If we do not know the target, we cannot check if input would be inserted\n        // as there is no target to attach the `beforeinput` event listener; in that\n        // case we just permit execution immediately (this may happen for programmatic\n        // uses of keydown)\n        const target = keyDownEvent.target;\n        if (!target) {\n            return permissionToExecute.resolve(true);\n        }\n        let onBeforeInput = null;\n        let onBeforeKeyUp = null;\n        const disconnectListeners = () => {\n            if (onBeforeInput) {\n                target.removeEventListener('beforeinput', onBeforeInput);\n            }\n            if (onBeforeKeyUp) {\n                target.removeEventListener('keyup', onBeforeKeyUp);\n            }\n        };\n        // Permit the execution conditionally, depending on whether the event would lead to text insertion\n        const causesInputPromise = Promise.race([\n            new Promise(resolve => {\n                onBeforeInput = (inputEvent) => {\n                    switch (inputEvent.inputType) {\n                        case 'historyUndo':\n                        case 'historyRedo': {\n                            if (inputEvent.target instanceof Element &&\n                                inputEvent.target.closest('[data-jp-undoer]')) {\n                                // Allow to use custom undo/redo bindings on `jpUndoer`s\n                                inputEvent.preventDefault();\n                                disconnectListeners();\n                                return resolve(false);\n                            }\n                            break;\n                        }\n                        case 'insertLineBreak': {\n                            if (inputEvent.target instanceof Element &&\n                                inputEvent.target.closest('.jp-Cell')) {\n                                // Allow to override the default action of Shift + Enter on cells as this is used for cell execution\n                                inputEvent.preventDefault();\n                                disconnectListeners();\n                                return resolve(false);\n                            }\n                            break;\n                        }\n                    }\n                    disconnectListeners();\n                    return resolve(true);\n                };\n                target.addEventListener('beforeinput', onBeforeInput, { once: true });\n            }),\n            new Promise(resolve => {\n                onBeforeKeyUp = (keyUpEvent) => {\n                    if (keyUpEvent.code === keyDownEvent.code) {\n                        disconnectListeners();\n                        return resolve(false);\n                    }\n                };\n                target.addEventListener('keyup', onBeforeKeyUp, { once: true });\n            }),\n            new Promise(resolve => {\n                setTimeout(() => {\n                    disconnectListeners();\n                    return resolve(false);\n                }, Private.INPUT_GUARD_TIMEOUT);\n            })\n        ]);\n        causesInputPromise\n            .then(willCauseInput => {\n            permissionToExecute.resolve(!willCauseInput);\n        })\n            .catch(console.warn);\n    }\n}\n/**\n * The namespace for `JupyterLab` class statics.\n */\n(function (JupyterLab) {\n    /**\n     * The layout restorer token.\n     */\n    JupyterLab.IInfo = new Token('@jupyterlab/application:IInfo', 'A service providing metadata about the current application, including disabled extensions and whether dev mode is enabled.');\n    /**\n     * The default JupyterLab application info.\n     */\n    JupyterLab.defaultInfo = {\n        devMode: PageConfig.getOption('devMode').toLowerCase() === 'true',\n        deferred: { patterns: [], matches: [] },\n        disabled: { patterns: [], matches: [] },\n        mimeExtensions: [],\n        availablePlugins: [],\n        filesCached: PageConfig.getOption('cacheFiles').toLowerCase() === 'true',\n        isConnected: true\n    };\n    /**\n     * The default JupyterLab application paths.\n     */\n    JupyterLab.defaultPaths = {\n        urls: {\n            base: PageConfig.getOption('baseUrl'),\n            notFound: PageConfig.getOption('notFoundUrl'),\n            app: PageConfig.getOption('appUrl'),\n            doc: PageConfig.getOption('docUrl'),\n            static: PageConfig.getOption('staticUrl'),\n            settings: PageConfig.getOption('settingsUrl'),\n            themes: PageConfig.getOption('themesUrl'),\n            translations: PageConfig.getOption('translationsApiUrl'),\n            hubHost: PageConfig.getOption('hubHost') || undefined,\n            hubPrefix: PageConfig.getOption('hubPrefix') || undefined,\n            hubUser: PageConfig.getOption('hubUser') || undefined,\n            hubServerName: PageConfig.getOption('hubServerName') || undefined\n        },\n        directories: {\n            appSettings: PageConfig.getOption('appSettingsDir'),\n            schemas: PageConfig.getOption('schemasDir'),\n            static: PageConfig.getOption('staticDir'),\n            templates: PageConfig.getOption('templatesDir'),\n            themes: PageConfig.getOption('themesDir'),\n            userSettings: PageConfig.getOption('userSettingsDir'),\n            serverRoot: PageConfig.getOption('serverRoot'),\n            workspaces: PageConfig.getOption('workspacesDir')\n        }\n    };\n})(JupyterLab || (JupyterLab = {}));\n/**\n * A namespace for module-private functionality.\n */\nvar Private;\n(function (Private) {\n    /**\n     * The delay for invoking a command introduced by user input guard.\n     * Decreasing this value may lead to commands incorrectly triggering\n     * on user input. Increasing this value will lead to longer delay for\n     * command invocation. Note that user input is never delayed.\n     *\n     * The value represents the number in milliseconds.\n     */\n    Private.INPUT_GUARD_TIMEOUT = 10;\n})(Private || (Private = {}));\n//# sourceMappingURL=lab.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Signal } from '@lumino/signaling';\n/**\n * The application status signals and flags class.\n */\nexport class LabStatus {\n    /**\n     * Construct a new  status object.\n     */\n    constructor(app) {\n        this._busyCount = 0;\n        this._dirtyCount = 0;\n        this._busySignal = new Signal(app);\n        this._dirtySignal = new Signal(app);\n    }\n    /**\n     * Returns a signal for when application changes its busy status.\n     */\n    get busySignal() {\n        return this._busySignal;\n    }\n    /**\n     * Returns a signal for when application changes its dirty status.\n     */\n    get dirtySignal() {\n        return this._dirtySignal;\n    }\n    /**\n     * Whether the application is busy.\n     */\n    get isBusy() {\n        return this._busyCount > 0;\n    }\n    /**\n     * Whether the application is dirty.\n     */\n    get isDirty() {\n        return this._dirtyCount > 0;\n    }\n    /**\n     * Set the application state to dirty.\n     *\n     * @returns A disposable used to clear the dirty state for the caller.\n     */\n    setDirty() {\n        const oldDirty = this.isDirty;\n        this._dirtyCount++;\n        if (this.isDirty !== oldDirty) {\n            this._dirtySignal.emit(this.isDirty);\n        }\n        return new DisposableDelegate(() => {\n            const oldDirty = this.isDirty;\n            this._dirtyCount = Math.max(0, this._dirtyCount - 1);\n            if (this.isDirty !== oldDirty) {\n                this._dirtySignal.emit(this.isDirty);\n            }\n        });\n    }\n    /**\n     * Set the application state to busy.\n     *\n     * @returns A disposable used to clear the busy state for the caller.\n     */\n    setBusy() {\n        const oldBusy = this.isBusy;\n        this._busyCount++;\n        if (this.isBusy !== oldBusy) {\n            this._busySignal.emit(this.isBusy);\n        }\n        return new DisposableDelegate(() => {\n            const oldBusy = this.isBusy;\n            this._busyCount--;\n            if (this.isBusy !== oldBusy) {\n                this._busySignal.emit(this.isBusy);\n            }\n        });\n    }\n}\n//# sourceMappingURL=status.js.map","/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport { URLExt } from '@jupyterlab/coreutils';\nimport { PromiseDelegate, Token } from '@lumino/coreutils';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Signal } from '@lumino/signaling';\n/**\n * A static class that routes URLs within the application.\n */\nexport class Router {\n    /**\n     * Create a URL router.\n     */\n    constructor(options) {\n        /**\n         * If a matching rule's command resolves with the `stop` token during routing,\n         * no further matches will execute.\n         */\n        this.stop = new Token('@jupyterlab/application:Router#stop');\n        this._routed = new Signal(this);\n        this._rules = new Map();\n        this.base = options.base;\n        this.commands = options.commands;\n    }\n    /**\n     * Returns the parsed current URL of the application.\n     */\n    get current() {\n        var _a, _b;\n        const { base } = this;\n        const parsed = URLExt.parse(window.location.href);\n        const { search, hash } = parsed;\n        const path = (_b = (_a = parsed.pathname) === null || _a === void 0 ? void 0 : _a.replace(base, '/')) !== null && _b !== void 0 ? _b : '';\n        const request = path + search + hash;\n        return { hash, path, request, search };\n    }\n    /**\n     * A signal emitted when the router routes a route.\n     */\n    get routed() {\n        return this._routed;\n    }\n    /**\n     * Navigate to a new path within the application.\n     *\n     * @param path - The new path or empty string if redirecting to root.\n     *\n     * @param options - The navigation options.\n     */\n    navigate(path, options = {}) {\n        const { base } = this;\n        const { history } = window;\n        const { hard } = options;\n        const old = document.location.href;\n        const url = path && path.indexOf(base) === 0 ? path : URLExt.join(base, path);\n        if (url === old) {\n            return hard ? this.reload() : undefined;\n        }\n        history.pushState({}, '', url);\n        if (hard) {\n            return this.reload();\n        }\n        if (!options.skipRouting) {\n            // Because a `route()` call may still be in the stack after having received\n            // a `stop` token, wait for the next stack frame before calling `route()`.\n            requestAnimationFrame(() => {\n                void this.route();\n            });\n        }\n    }\n    /**\n     * Register to route a path pattern to a command.\n     *\n     * @param options - The route registration options.\n     *\n     * @returns A disposable that removes the registered rule from the router.\n     */\n    register(options) {\n        var _a;\n        const { command, pattern } = options;\n        const rank = (_a = options.rank) !== null && _a !== void 0 ? _a : 100;\n        const rules = this._rules;\n        rules.set(pattern, { command, rank });\n        return new DisposableDelegate(() => {\n            rules.delete(pattern);\n        });\n    }\n    /**\n     * Cause a hard reload of the document.\n     */\n    reload() {\n        window.location.reload();\n    }\n    /**\n     * Route a specific path to an action.\n     *\n     * #### Notes\n     * If a pattern is matched, its command will be invoked with arguments that\n     * match the `IRouter.ILocation` interface.\n     */\n    route() {\n        const { commands, current, stop } = this;\n        const { request } = current;\n        const routed = this._routed;\n        const rules = this._rules;\n        const matches = [];\n        // Collect all rules that match the URL.\n        rules.forEach((rule, pattern) => {\n            if (request === null || request === void 0 ? void 0 : request.match(pattern)) {\n                matches.push(rule);\n            }\n        });\n        // Order the matching rules by rank and enqueue them.\n        const queue = matches.sort((a, b) => b.rank - a.rank);\n        const done = new PromiseDelegate();\n        // Process each enqueued command sequentially and short-circuit if a promise\n        // resolves with the `stop` token.\n        const next = async () => {\n            if (!queue.length) {\n                routed.emit(current);\n                done.resolve(undefined);\n                return;\n            }\n            const { command } = queue.pop();\n            try {\n                const request = this.current.request;\n                const result = await commands.execute(command, current);\n                if (result === stop) {\n                    queue.length = 0;\n                    console.debug(`Routing ${request} was short-circuited by ${command}`);\n                }\n            }\n            catch (reason) {\n                console.warn(`Routing ${request} to ${command} failed`, reason);\n            }\n            void next();\n        };\n        void next();\n        return done.promise;\n    }\n}\n//# sourceMappingURL=router.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Token } from '@lumino/coreutils';\n/**\n * A token for which a plugin can provide to respond to connection failures\n * to the application server.\n */\nexport const IConnectionLost = new Token('@jupyterlab/application:IConnectionLost', `A service for invoking the dialog shown\n  when JupyterLab has lost its connection to the server. Use this if, for some reason,\n  you want to bring up the \"connection lost\" dialog under new circumstances.`);\n/**\n * The application status token.\n */\nexport const ILabStatus = new Token('@jupyterlab/application:ILabStatus', `A service for interacting with the application busy/dirty\n  status. Use this if you want to set the application \"busy\" favicon, or to set\n  the application \"dirty\" status, which asks the user for confirmation before leaving the application page.`);\n/**\n * The URL Router token.\n */\nexport const IRouter = new Token('@jupyterlab/application:IRouter', 'The URL router used by the application. Use this to add custom URL-routing for your extension (e.g., to invoke a command if the user navigates to a sub-path).');\n//# sourceMappingURL=tokens.js.map","/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport { Token } from '@lumino/coreutils';\n/**\n * The tree path updater token.\n */\nexport const ITreePathUpdater = new Token('@jupyterlab/application:ITreePathUpdater', 'A service to update the tree path.');\n//# sourceMappingURL=treepathupdater.js.map","/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\nimport { nullTranslator } from '@jupyterlab/translation';\n/**\n * Add a semantic commands to the application and take care\n * of setting up the command changed signal.\n *\n * @param options Semantic command options\n */\nexport function addSemanticCommand(options) {\n    const { id, commands, shell, semanticCommands, default: defaultValues, overrides, trans } = options;\n    commands.addCommand(id, {\n        ...createSemanticCommand({ commands, shell }, semanticCommands, defaultValues !== null && defaultValues !== void 0 ? defaultValues : {}, trans !== null && trans !== void 0 ? trans : nullTranslator.load('jupyterlab')),\n        ...overrides\n    });\n    const commandList = Array.isArray(semanticCommands)\n        ? semanticCommands\n        : [semanticCommands];\n    const onCommandChanged = (commands, args) => {\n        if (args.id) {\n            if (args.id === id && args.type === 'removed') {\n                commands.commandChanged.disconnect(onCommandChanged);\n            }\n            else {\n                const commandIds = commandList.reduce((agg, cmd) => agg.concat(cmd.ids), []);\n                if (commandIds.includes(args.id)) {\n                    switch (args.type) {\n                        case 'changed':\n                        case 'many-changed':\n                            commands.notifyCommandChanged(id);\n                            break;\n                        case 'removed':\n                            for (const cmd of commandList) {\n                                cmd.remove(args.id);\n                            }\n                            break;\n                    }\n                }\n            }\n        }\n    };\n    commands.commandChanged.connect(onCommandChanged);\n}\n/**\n * Create the command options from the given semantic commands list\n * and the given default values.\n *\n * @param app Jupyter Application\n * @param semanticCommands Single semantic command  or a list of commands\n * @param defaultValues Default values\n * @param trans Translation bundle\n * @returns Command options\n *\n * @deprecated Please use {@link addSemanticCommand}. This function will\n * be removed of the public API in JupyterLab 5.\n */\nexport function createSemanticCommand(app, semanticCommands, defaultValues, trans) {\n    const { commands, shell } = app;\n    const commandList = Array.isArray(semanticCommands)\n        ? semanticCommands\n        : [semanticCommands];\n    return {\n        label: concatenateTexts('label'),\n        caption: concatenateTexts('caption'),\n        isEnabled: () => {\n            var _a;\n            const isEnabled = reduceAttribute('isEnabled');\n            return ((isEnabled.length > 0 &&\n                !isEnabled.some(enabled => enabled === false)) ||\n                ((_a = defaultValues.isEnabled) !== null && _a !== void 0 ? _a : false));\n        },\n        isToggled: () => {\n            var _a;\n            const isToggled = reduceAttribute('isToggled');\n            return (isToggled.some(enabled => enabled === true) ||\n                ((_a = defaultValues.isToggled) !== null && _a !== void 0 ? _a : false));\n        },\n        isVisible: () => {\n            var _a;\n            const isVisible = reduceAttribute('isVisible');\n            return ((isVisible.length > 0 &&\n                !isVisible.some(visible => visible === false)) ||\n                ((_a = defaultValues.isVisible) !== null && _a !== void 0 ? _a : true));\n        },\n        execute: async () => {\n            const widget = shell.currentWidget;\n            const commandIds = commandList.map(cmd => widget !== null ? cmd.getActiveCommandId(widget) : null);\n            const toExecute = commandIds.filter(commandId => commandId !== null && commands.isEnabled(commandId));\n            let result = null;\n            if (toExecute.length > 0) {\n                for (const commandId of toExecute) {\n                    result = await commands.execute(commandId);\n                    if (typeof result === 'boolean' && result === false) {\n                        // If a command returns a boolean, assume it is the execution success status\n                        // So break if it is false.\n                        break;\n                    }\n                }\n            }\n            else if (defaultValues.execute) {\n                result = await commands.execute(defaultValues.execute);\n            }\n            return result;\n        }\n    };\n    function reduceAttribute(attribute) {\n        const widget = shell.currentWidget;\n        const commandIds = commandList.map(cmd => widget !== null ? cmd.getActiveCommandId(widget) : null);\n        const attributes = commandIds\n            .filter(commandId => commandId !== null)\n            .map(commandId => commands[attribute](commandId));\n        return attributes;\n    }\n    function concatenateTexts(attribute) {\n        return () => {\n            var _a;\n            const texts = reduceAttribute(attribute).map((text, textIndex) => attribute == 'caption' && textIndex > 0\n                ? text.toLocaleLowerCase()\n                : text);\n            switch (texts.length) {\n                case 0:\n                    return (_a = defaultValues[attribute]) !== null && _a !== void 0 ? _a : '';\n                case 1:\n                    return texts[0];\n                default: {\n                    const hasEllipsis = texts.some(l => /$/.test(l));\n                    const main = texts\n                        .slice(undefined, -1)\n                        .map(l => l.replace(/$/, ''))\n                        .join(', ');\n                    const end = texts.slice(-1)[0].replace(/$/, '') + (hasEllipsis ? '' : '');\n                    return trans.__('%1 and %2', main, end);\n                }\n            }\n        };\n    }\n}\n//# sourceMappingURL=utils.js.map"],"names":["ConnectionLost","async","manager","err","translator","trans","nullTranslator","load","title","__","networkMsg","Private","displayConnectionLost","serverConnectionLost","dialog","showDialog","body","checkbox","label","caption","buttons","Dialog","cancelButton","then","result","isChecked","catch","error","console","finally","undefined","JupyterFrontEndContextMenu","JupyterFrontEnd","Application","constructor","options","super","this","_formatChanged","Signal","shell","addClass","contextMenu","ContextMenuSvg","commands","renderer","contextMenuRenderer","groupByTarget","sortBySelector","restored","Promise","resolve","requestAnimationFrame","commandLinker","CommandLinker","docRegistry","DocumentRegistry","started","serviceManager","ServiceManager","format","_format","document","dataset","emit","formatChanged","contextMenuHitTest","fn","_contextMenuEvent","target","Node","node","HTMLElement","parentNode","evtContextMenu","event","shiftKey","suppressContextMenu","open","items","menu","length","command","close","preventDefault","stopPropagation","inDocMode","path","paths","docPattern","RegExp","urls","doc","match","IPaths","Token","ITreeResolver","element","closest","SIDEBAR_CLASS","CURRENT_CLASS","ACTIVE_CLASS","DEFAULT_RANK","ACTIVITY_CLASS","ILabShell","LabShell","Widget","_dockChildHook","handler","msg","type","child","_tracker","add","removeClass","remove","_activeChanged","_cachedLayout","_currentChanged","_currentPath","_currentPathChanged","_modeChanged","_isRestored","_layoutModified","_layoutDebouncer","Debouncer","_restored","PromiseDelegate","FocusTracker","_topHandlerHiddenByUser","_idTypeMap","Map","_mainOptionsCache","_sideOptionsCache","_delayedWidget","Array","id","waitForRestore","_userLayout","skipLinkWidget","_skipLinkWidget","SkipLinkWidget","show","skipLinkWrapper","Panel","addWidget","headerPanel","_headerPanel","BoxPanel","menuHandler","_menuHandler","PanelHandler","panel","setAttribute","topHandler","_topHandler","bottomPanel","_bottomPanel","hboxPanel","vsplitPanel","_vsplitPanel","RestorableSplitPanel","dockPanel","_dockPanel","DockPanelSvg","hiddenMode","HiddenMode","Display","MessageLoop","installMessageHook","hsplitPanel","_hsplitPanel","downPanel","_downPanel","TabPanelSvg","tabsMovable","leftHandler","_leftHandler","SideBarHandler","rightHandler","_rightHandler","rootLayout","BoxLayout","sideBar","stackedPanel","spacing","direction","orientation","SplitPanel","setStretch","setRelativeSizes","hide","layout","currentChanged","connect","_onCurrentChanged","activeChanged","_onActiveChanged","layoutModified","_onLayoutModified","updated","tabBar","tabMoved","_onTabPanelChanged","widgetRemoved","titleHandler","_titleHandler","TitleHandler","rank","mode","insertWidget","sender","args","newValue","oldValue","changed","disconnect","_updateTitlePanelTitle","DocumentWidget","context","pathChanged","_updateCurrentPath","activeWidget","addButtonEnabled","value","addRequested","currentPath","currentPathChanged","currentWidget","leftCollapsed","currentTitle","rightCollapsed","presentationMode","hasClass","toggleClass","dock","applicationCurrentWidget","saveLayout","activateWidget","widgets","from","normalizeAreaConfig","main","restoreLayout","_layoutRestorer","isDeferred","restoreDeferred","mainArea","activateById","reason","forEach","widget","parent","_addToMainArea","get","activate","clear","shellMode","fit","modeChanged","promise","_a","_translator","TabBarSvg","contentNode","userLayout","JSONExt","deepCopy","has","tabIndex","titles","findIndex","owner","currentIndex","find","activateArea","area","current","_currentTabBar","debug","Error","activateNextTab","ci","nextBar","_adjacentBar","activatePreviousTab","prevBar","len","activateNextTabBar","activatePreviousTabBar","push","userPosition","set","disposed","delete","_addToBottomArea","_addToDownArea","_addToHeaderArea","_addToLeftArea","_addToMenuArea","_addToRightArea","_addToTopArea","move","m","filter","c","collapseLeft","collapse","collapseRight","dispose","isDisposed","expandLeft","expand","expandRight","closeAll","isSideTabBarVisible","side","isVisible","isTopInSimpleModeVisible","isEmpty","layoutRestorer","configuration","_b","_c","_d","fetch","downArea","leftArea","rightArea","topArea","relativeSizes","simpleVisibility","setHidden","size","widgetIds","map","includes","titleIds","ArrayExt","shallowEqual","index","position","insertTab","rehydrate","flush","dehydrate","toggleTopInSimpleModeVisibility","toggleSideTabBarVisibility","updateConfig","config","Scale","ContentVisibility","t","children","onAfterAttach","inputElement","ref","icon","LabIcon","bindprops","stylesheet","iconClass","classes","isHidden","bars","tabBars","indexOf","bar","className","replace","invoke","itemCmp","first","second","_panelChildHook","_items","v","removeFirstWhere","_panel","item","upperBound","insert","_isHiddenByUser","_updated","_sideBar","TabBar","insertBehavior","removeBehavior","allowDeselect","_stackedPanel","StackedPanel","_lastCurrent","tabActivateRequested","_onTabActivateRequested","_onWidgetRemoved","_onHandleMoved","_refreshVisibility","_onExpansionToggle","previous","_findWidgetByID","_findInsertIndex","tabIcon","content","expansionToggled","handleMoved","collapsed","widgetStates","w","sizes","expansionStates","wi","visible","data","state","widx","expansion","AccordionPanel","_findWidgetIndex","findFirstIndex","i","_findWidgetByTitle","oldWidget","previousTitle","newWidget","removeAt","removeTab","_shell","_createSkipLink","handleEvent","targetarea","addEventListener","onBeforeDetach","removeEventListener","skipLinkText","skipLink","createElement","href","text","appendChild","_selected","_evtKeyUp","_evtClick","key","oldName","newName","blur","button","selectEnd","select","setSelectionRange","onUpdateRequest","LabStatus","app","_busyCount","_dirtyCount","_busySignal","_dirtySignal","busySignal","dirtySignal","isBusy","isDirty","setDirty","oldDirty","DisposableDelegate","Math","max","setBusy","oldBusy","JupyterLab","standby","_info","isConnected","name","PageConfig","getOption","namespace","registerPluginErrors","status","version","defaultInfo","_allPluginsActivated","info","Object","keys","reduce","acc","val","JSON","parse","stringify","activated","deferred","activateDeferredPlugins","customizedDeferred","all","matches","pluginID","activatePlugin","defaultURLs","defaultPaths","defaultDirs","directories","optionURLs","optionDirs","_paths","devMode","addModelFactory","Base64ModelFactory","mimeExtensions","plugin","registerPlugin","allPluginsActivated","registerPluginModule","mod","default","hasOwnProperty","isArray","registerPluginModules","mods","evtKeydown","keyDownEvent","permissionToExecute","holdKeyBindingExecution","processKeydownEvent","onBeforeInput","onBeforeKeyUp","disconnectListeners","race","inputEvent","inputType","Element","once","keyUpEvent","code","setTimeout","INPUT_GUARD_TIMEOUT","willCauseInput","warn","IInfo","toLowerCase","patterns","disabled","availablePlugins","filesCached","base","notFound","static","settings","themes","translations","hubHost","hubPrefix","hubUser","hubServerName","appSettings","schemas","templates","userSettings","serverRoot","workspaces","Router","stop","_routed","_rules","parsed","URLExt","window","location","search","hash","pathname","request","routed","navigate","history","hard","old","url","join","reload","pushState","skipRouting","route","register","pattern","rules","rule","queue","sort","a","b","done","next","pop","execute","IConnectionLost","ILabStatus","IRouter","ITreePathUpdater","addSemanticCommand","semanticCommands","defaultValues","overrides","addCommand","createSemanticCommand","commandList","onCommandChanged","commandChanged","agg","cmd","concat","ids","notifyCommandChanged","concatenateTexts","isEnabled","reduceAttribute","some","enabled","isToggled","toExecute","getActiveCommandId","commandId","attribute","texts","textIndex","toLocaleLowerCase","hasEllipsis","l","test","slice","end"],"sourceRoot":""}